---
title: gRPC
description: Erfahren Sie mehr über GrpC, seine Rolle in Cloud native-Anwendungen und die Unterschiede zwischen der http-Rest-Kommunikation.
author: robvet
ms.date: 03/31/2020
ms.openlocfilehash: 01dd4c934f0b39041ea377691067edf4dbe20378
ms.sourcegitcommit: 957c49696eaf048c284ef8f9f8ffeb562357ad95
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/07/2020
ms.locfileid: "82895566"
---
# <a name="grpc"></a><span data-ttu-id="f8202-103">gRPC</span><span class="sxs-lookup"><span data-stu-id="f8202-103">gRPC</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="f8202-104">Bisher haben wir uns in diesem Buch auf die [Rest-basierte](https://docs.microsoft.com/azure/architecture/best-practices/api-design) Kommunikation konzentriert.</span><span class="sxs-lookup"><span data-stu-id="f8202-104">So far in this book, we've focused on [REST-based](https://docs.microsoft.com/azure/architecture/best-practices/api-design) communication.</span></span> <span data-ttu-id="f8202-105">Wir haben gesehen, dass Rest ein flexibler Architekturstil ist, der CRUD-basierte Vorgänge für Entitäts Ressourcen definiert.</span><span class="sxs-lookup"><span data-stu-id="f8202-105">We've seen that REST is a flexible architectural style that defines CRUD-based operations against entity resources.</span></span> <span data-ttu-id="f8202-106">Clients interagieren mit Ressourcen über HTTP mit einem Anforderungs-/Antwort-Kommunikationsmodell.</span><span class="sxs-lookup"><span data-stu-id="f8202-106">Clients interact with resources across HTTP with a request/response communication model.</span></span> <span data-ttu-id="f8202-107">Auch wenn Rest weit verbreitet ist, hat eine neuere Kommunikationstechnologie (GrpC) in der Cloud-Native Community enorme Dynamik erzielt.</span><span class="sxs-lookup"><span data-stu-id="f8202-107">While REST is widely implemented, a newer communication technology, gRPC, has gained tremendous momentum across the cloud-native community.</span></span>

## <a name="what-is-grpc"></a><span data-ttu-id="f8202-108">Was ist GrpC?</span><span class="sxs-lookup"><span data-stu-id="f8202-108">What is gRPC?</span></span>

<span data-ttu-id="f8202-109">GrpC ist ein modernes Hochleistungs Framework, das das alte RPC-Protokoll [(Remote Procedure callage)](https://en.wikipedia.org/wiki/Remote_procedure_call) weiterentwickelt.</span><span class="sxs-lookup"><span data-stu-id="f8202-109">gRPC is a modern, high-performance framework that evolves the age-old [remote procedure call (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) protocol.</span></span> <span data-ttu-id="f8202-110">Auf Anwendungsebene optimiert GrpC das Messaging zwischen Clients und Back-End-Diensten.</span><span class="sxs-lookup"><span data-stu-id="f8202-110">At the application level, gRPC streamlines messaging between clients and back-end services.</span></span> <span data-ttu-id="f8202-111">GrpC stammt von Google und ist Open Source und Bestandteil des Ökosystems der Cloud [native Computing Foundation (cncf)](https://www.cncf.io/) der cloudbasierten Angebote.</span><span class="sxs-lookup"><span data-stu-id="f8202-111">Originating from Google, gRPC is open source and part of the  [Cloud Native Computing Foundation (CNCF)](https://www.cncf.io/) ecosystem of cloud-native offerings.</span></span> <span data-ttu-id="f8202-112">Cncf betrachtet GrpC als [Projekt](https://github.com/cncf/toc/blob/master/process/graduation_criteria.adoc), das ein Projekt umfasst.</span><span class="sxs-lookup"><span data-stu-id="f8202-112">CNCF considers gRPC an [incubating project](https://github.com/cncf/toc/blob/master/process/graduation_criteria.adoc).</span></span> <span data-ttu-id="f8202-113">Das Auffüllen bedeutet, dass Endbenutzer die Technologie in Produktionsanwendungen verwenden und dass das Projekt eine fehlerfreie Anzahl von Mitwirkenden hat.</span><span class="sxs-lookup"><span data-stu-id="f8202-113">Incubating means end users are using the technology in production applications, and the project has a healthy number of contributors.</span></span>

<span data-ttu-id="f8202-114">Eine typische GrpC-Client-App macht eine lokale, in-Process-Funktion verfügbar, die einen Geschäftsvorgang implementiert.</span><span class="sxs-lookup"><span data-stu-id="f8202-114">A typical gRPC client app will expose a local, in-process function that implements a business operation.</span></span> <span data-ttu-id="f8202-115">Im Untertitel ruft diese lokale Funktion eine andere Funktion auf einem Remote Computer auf.</span><span class="sxs-lookup"><span data-stu-id="f8202-115">Under the covers, that local function invokes another function on a remote machine.</span></span> <span data-ttu-id="f8202-116">Was als lokaler-Befehl erscheint, wird im Wesentlichen zu einem transparenten Prozess internen Aufrufe eines Remote Dienstanbieter.</span><span class="sxs-lookup"><span data-stu-id="f8202-116">What appears to be a local call essentially becomes a transparent out-of-process call to a remote service.</span></span> <span data-ttu-id="f8202-117">Die RPC-Grundlagen abstrahiert die Punkt-zu-Punkt-Netzwerkkommunikation,-Serialisierung und-Ausführung zwischen Computern.</span><span class="sxs-lookup"><span data-stu-id="f8202-117">The RPC plumbing abstracts the point-to-point networking communication, serialization, and execution between computers.</span></span>

<span data-ttu-id="f8202-118">In Cloud-native Anwendungen arbeiten Entwickler häufig über Programmiersprachen, Frameworks und Technologien hinweg.</span><span class="sxs-lookup"><span data-stu-id="f8202-118">In cloud-native applications, developers often work across programming languages, frameworks, and technologies.</span></span> <span data-ttu-id="f8202-119">Diese *Interoperabilität* erschwert Nachrichten Verträge und die für die plattformübergreifende Kommunikation erforderliche Grundlagen.</span><span class="sxs-lookup"><span data-stu-id="f8202-119">This *interoperability* complicates message contracts and the plumbing required for cross-platform communication.</span></span>  <span data-ttu-id="f8202-120">GrpC bietet eine "einheitliche horizontale Schicht", die diese Probleme abstrahiert.</span><span class="sxs-lookup"><span data-stu-id="f8202-120">gRPC provides a "uniform horizontal layer" that abstracts these concerns.</span></span> <span data-ttu-id="f8202-121">Entwickler Programmieren in ihrer nativen Plattform den Schwerpunkt auf Geschäftsfunktionen, während GrpC die Kommunikationsabläufe übernimmt.</span><span class="sxs-lookup"><span data-stu-id="f8202-121">Developers code in their native platform focused on business functionality, while gRPC handles communication plumbing.</span></span>

<span data-ttu-id="f8202-122">GrpC bietet umfassende Unterstützung für die beliebtesten Entwicklungs Stapel, einschließlich Java, JavaScript, c#, go, SWIFT und nodejs.</span><span class="sxs-lookup"><span data-stu-id="f8202-122">gRPC offers comprehensive support across most popular development stacks, including Java, JavaScript, C#, Go, Swift, and NodeJS.</span></span>

## <a name="grpc-benefits"></a><span data-ttu-id="f8202-123">GrpC-Vorteile</span><span class="sxs-lookup"><span data-stu-id="f8202-123">gRPC Benefits</span></span>

<span data-ttu-id="f8202-124">GrpC verwendet http/2 für das Transportprotokoll.</span><span class="sxs-lookup"><span data-stu-id="f8202-124">gRPC uses HTTP/2 for its transport protocol.</span></span> <span data-ttu-id="f8202-125">Obwohl http/2 mit HTTP 1,1 kompatibel ist, bietet es viele erweiterte Funktionen:</span><span class="sxs-lookup"><span data-stu-id="f8202-125">While compatible with HTTP 1.1, HTTP/2 features many advanced capabilities:</span></span>

- <span data-ttu-id="f8202-126">Ein binäres Protokoll für den Datentransport-im Gegensatz zu HTTP 1,1, bei dem Daten als Klartext gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="f8202-126">A binary protocol for data transport - unlike HTTP 1.1, which sends data as clear text.</span></span>
- <span data-ttu-id="f8202-127">Multiplexing-Unterstützung für das Senden mehrerer paralleler Anforderungen über dieselbe Verbindung-http 1,1 beschränkt die Verarbeitung auf eine Anforderungs-/Antwort-Nachricht gleichzeitig.</span><span class="sxs-lookup"><span data-stu-id="f8202-127">Multiplexing support for sending multiple parallel requests over the same connection - HTTP 1.1 limits processing to one request/response message at a time.</span></span>
- <span data-ttu-id="f8202-128">Bidirektionale Vollduplex Kommunikation für das gleichzeitige Senden von Client Anforderungen und Server Antworten.</span><span class="sxs-lookup"><span data-stu-id="f8202-128">Bidirectional full-duplex communication for sending both client requests and server responses simultaneously.</span></span>
- <span data-ttu-id="f8202-129">Integriertes Streaming, das Anforderungen und Antworten zum asynchronen streamen großer Datasets ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="f8202-129">Built-in streaming enabling requests and responses to asynchronously stream large data sets.</span></span>

<span data-ttu-id="f8202-130">GrpC ist einfach und leistungsstark.</span><span class="sxs-lookup"><span data-stu-id="f8202-130">gRPC is lightweight and highly performant.</span></span> <span data-ttu-id="f8202-131">Es kann bis zu 8-mal schneller als die JSON-Serialisierung mit Nachrichten von 60-80% kleiner sein.</span><span class="sxs-lookup"><span data-stu-id="f8202-131">It can be up to 8x faster than JSON serialization with messages 60-80% smaller.</span></span> <span data-ttu-id="f8202-132">In der Microsoft [Windows Communication Foundation (WCF)](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) -Sprache überschreitet die GrpC-Leistung die Geschwindigkeit und Effizienz der stark optimierten [NetTcp-Bindungen](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8).</span><span class="sxs-lookup"><span data-stu-id="f8202-132">In Microsoft [Windows Communication Foundation (WCF)](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) parlance, gRPC performance exceeds the speed and efficiency of the highly optimized [NetTCP bindings](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8).</span></span> <span data-ttu-id="f8202-133">Anders als NetTcp, das den Microsoft Stack bevorzugt, ist GrpC plattformübergreifend.</span><span class="sxs-lookup"><span data-stu-id="f8202-133">Unlike NetTCP, which favors the Microsoft stack, gRPC is cross-platform.</span></span>

## <a name="protocol-buffers"></a><span data-ttu-id="f8202-134">Protokollpuffer</span><span class="sxs-lookup"><span data-stu-id="f8202-134">Protocol Buffers</span></span>

<span data-ttu-id="f8202-135">GrpC umfasst eine Open Source-Technologie namens [Protokollpuffer](https://developers.google.com/protocol-buffers/docs/overview).</span><span class="sxs-lookup"><span data-stu-id="f8202-135">gRPC embraces an open-source technology called [Protocol Buffers](https://developers.google.com/protocol-buffers/docs/overview).</span></span> <span data-ttu-id="f8202-136">Sie bieten ein sehr effizientes und Platt Form neutrales Serialisierungsformat zum Serialisieren strukturierter Nachrichten, die von Diensten an einander gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="f8202-136">They provide a highly efficient and platform-neutral serialization format for serializing structured messages that services send to each other.</span></span> <span data-ttu-id="f8202-137">Mithilfe einer plattformübergreifenden Schnittstellen Definitions Sprache (IDL) definieren Entwickler einen Dienstvertrag für jeden einzelnen mikroservice.</span><span class="sxs-lookup"><span data-stu-id="f8202-137">Using a cross-platform Interface Definition Language (IDL), developers define a service contract for each microservice.</span></span> <span data-ttu-id="f8202-138">Der als textbasierte `.proto` Datei implementierte Vertrag beschreibt die Methoden, Eingaben und Ausgaben für jeden Dienst.</span><span class="sxs-lookup"><span data-stu-id="f8202-138">The contract, implemented as a text-based `.proto` file, describes the methods, inputs, and outputs for each service.</span></span> <span data-ttu-id="f8202-139">Die gleiche Vertrags Datei kann für GrpC-Clients und-Dienste verwendet werden, die auf unterschiedlichen Entwicklungsplattformen erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="f8202-139">The same contract file can be used for gRPC clients and services built on different development platforms.</span></span>

<span data-ttu-id="f8202-140">Wenn Sie die Datei "proto" verwenden, generiert der `protoc`protobuf-Compiler sowohl Client-als auch Dienst Code für die Zielplattform.</span><span class="sxs-lookup"><span data-stu-id="f8202-140">Using the proto file, the Protobuf compiler, `protoc`, generates both client and service code for your target platform.</span></span> <span data-ttu-id="f8202-141">Der Code enthält die folgenden Komponenten:</span><span class="sxs-lookup"><span data-stu-id="f8202-141">The code includes the following components:</span></span>

- <span data-ttu-id="f8202-142">Stark typisierte Objekte, die vom Client und Dienst gemeinsam verwendet werden und die Dienst Vorgänge und Datenelemente für eine Nachricht darstellen.</span><span class="sxs-lookup"><span data-stu-id="f8202-142">Strongly-typed objects, shared by the client and service, that represent the service operations and data elements for a message.</span></span>
- <span data-ttu-id="f8202-143">Eine stark typisierte Basisklasse mit der erforderlichen Netzwerk Versorgung, die vom Remote-GrpC-Dienst geerbt und erweitert werden kann.</span><span class="sxs-lookup"><span data-stu-id="f8202-143">A strongly-typed base class with the required network plumbing that the remote gRPC service can inherit and extend.</span></span>
- <span data-ttu-id="f8202-144">Ein Clientstub, der die erforderlichen Grundlagen zum Aufrufen des Remote-GrpC-Dienstanbieter enthält.</span><span class="sxs-lookup"><span data-stu-id="f8202-144">A client stub that contains the required plumbing to invoke the remote gRPC service.</span></span>

<span data-ttu-id="f8202-145">Zur Laufzeit wird jede Nachricht als standardmäßige protobuf-Darstellung serialisiert und zwischen dem Client und dem Remote Dienst ausgetauscht.</span><span class="sxs-lookup"><span data-stu-id="f8202-145">At runtime, each message is serialized as a standard Protobuf representation and exchanged between the client and remote service.</span></span> <span data-ttu-id="f8202-146">Im Gegensatz zu JSON oder XML werden protobuf-Nachrichten als kompilierte Binär Bytes serialisiert.</span><span class="sxs-lookup"><span data-stu-id="f8202-146">Unlike JSON or XML, Protobuf messages are serialized as compiled binary bytes.</span></span>

<span data-ttu-id="f8202-147">Das Buch, [GrpC für WCF-Entwickler](https://docs.microsoft.com/dotnet/architecture/grpc-for-wcf-developers/), das auf der Microsoft-Architektur Website verfügbar ist, bietet eine ausführliche Abdeckung der GrpC-und Protokollpuffer.</span><span class="sxs-lookup"><span data-stu-id="f8202-147">The book, [gRPC for WCF Developers](https://docs.microsoft.com/dotnet/architecture/grpc-for-wcf-developers/), available from the Microsoft Architecture site, provides in-depth coverage of gRPC and Protocol Buffers.</span></span>

## <a name="grpc-support-in-net"></a><span data-ttu-id="f8202-148">GrpC-Unterstützung in .net</span><span class="sxs-lookup"><span data-stu-id="f8202-148">gRPC support in .NET</span></span>

<span data-ttu-id="f8202-149">GrpC ist in .net Core 3,0 SDK und höher integriert.</span><span class="sxs-lookup"><span data-stu-id="f8202-149">gRPC is integrated into .NET Core 3.0 SDK and later.</span></span> <span data-ttu-id="f8202-150">Die folgenden Tools unterstützen diese:</span><span class="sxs-lookup"><span data-stu-id="f8202-150">The following tools support it:</span></span>

- <span data-ttu-id="f8202-151">Visual Studio 2019, Version 16,3 oder höher, mit installierter Webentwicklungs-Arbeitsauslastung.</span><span class="sxs-lookup"><span data-stu-id="f8202-151">Visual Studio 2019, version 16.3 or later, with the web development workload installed.</span></span>
- <span data-ttu-id="f8202-152">Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="f8202-152">Visual Studio Code</span></span>
- <span data-ttu-id="f8202-153">die dotnet-CLI</span><span class="sxs-lookup"><span data-stu-id="f8202-153">the dotnet CLI</span></span>

<span data-ttu-id="f8202-154">Das SDK enthält Tools für das Endpunkt Routing, das integrierte IOC und die Protokollierung.</span><span class="sxs-lookup"><span data-stu-id="f8202-154">The SDK includes tooling for endpoint routing, built-in IoC, and logging.</span></span> <span data-ttu-id="f8202-155">Der Open-Source-Kestrel-Webserver unterstützt HTTP/2-Verbindungen.</span><span class="sxs-lookup"><span data-stu-id="f8202-155">The open-source Kestrel web server supports HTTP/2 connections.</span></span> <span data-ttu-id="f8202-156">In Abbildung 4-20 wird eine Visual Studio 2019-Vorlage gezeigt, die ein Gerüst Projekt für einen GrpC-Dienst gerükt.</span><span class="sxs-lookup"><span data-stu-id="f8202-156">Figure 4-20 shows a Visual Studio 2019 template that scaffolds a skeleton project for a gRPC service.</span></span> <span data-ttu-id="f8202-157">Beachten Sie, dass .net Core Windows, Linux und macOS vollständig unterstützt.</span><span class="sxs-lookup"><span data-stu-id="f8202-157">Note how .NET Core fully supports Windows, Linux, and macOS.</span></span>

![GrpC-Unterstützung in Visual Studio 2019](./media/visual-studio-2019-grpc-template.png)

<span data-ttu-id="f8202-159">**Abbildung 4-20:**</span><span class="sxs-lookup"><span data-stu-id="f8202-159">**Figure 4-20**.</span></span> <span data-ttu-id="f8202-160">GrpC-Unterstützung in Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="f8202-160">gRPC support in Visual Studio 2019</span></span>
  
<span data-ttu-id="f8202-161">In Abbildung 4-21 wird der Skeleton GrpC-Dienst gezeigt, der aus dem integrierten Gerüstbau in Visual Studio 2019 generiert wurde.</span><span class="sxs-lookup"><span data-stu-id="f8202-161">Figure 4-21 shows the skeleton gRPC service generated from the built-in scaffolding included in Visual Studio 2019.</span></span>  

![GrpC-Projekt in Visual Studio 2019](./media/grpc-project.png  )

<span data-ttu-id="f8202-163">**Abbildung 4-21:**</span><span class="sxs-lookup"><span data-stu-id="f8202-163">**Figure 4-21**.</span></span> <span data-ttu-id="f8202-164">GrpC-Projekt in Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="f8202-164">gRPC project in Visual Studio 2019</span></span>

<span data-ttu-id="f8202-165">Beachten Sie in der obigen Abbildung die Datei mit den Proto-Beschreibungen und den Dienst Code.</span><span class="sxs-lookup"><span data-stu-id="f8202-165">In the previous figure, note the proto description file and service code.</span></span> <span data-ttu-id="f8202-166">Wie Sie sehen, generiert Visual Studio eine zusätzliche Konfiguration in der Startklasse und der zugrunde liegenden Projektdatei.</span><span class="sxs-lookup"><span data-stu-id="f8202-166">As you'll see shortly, Visual Studio generates additional configuration in both the Startup class and underlying project file.</span></span>

## <a name="grpc-usage"></a><span data-ttu-id="f8202-167">GrpC-Nutzung</span><span class="sxs-lookup"><span data-stu-id="f8202-167">gRPC usage</span></span>

<span data-ttu-id="f8202-168">Bevorzugen Sie GrpC für die folgenden Szenarien:</span><span class="sxs-lookup"><span data-stu-id="f8202-168">Favor gRPC for the following scenarios:</span></span>

- <span data-ttu-id="f8202-169">Synchrone Kommunikation zwischen dem Zwischenspeicher und dem mikrodienst, bei der eine sofortige Antwort erforderlich ist, um die Verarbeitung fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="f8202-169">Synchronous backend microservice-to-microservice communication where an immediate response is required to continue processing.</span></span>
- <span data-ttu-id="f8202-170">Polyglot-Umgebungen, die gemischte Programmier Plattformen unterstützen müssen.</span><span class="sxs-lookup"><span data-stu-id="f8202-170">Polyglot environments that need to support mixed programming platforms.</span></span>
- <span data-ttu-id="f8202-171">Kommunikation mit niedriger Latenz und hohem Durchsatz, bei der die Leistung kritisch ist.</span><span class="sxs-lookup"><span data-stu-id="f8202-171">Low latency and high throughput communication where performance is critical.</span></span>
- <span data-ttu-id="f8202-172">Point-to-Point-Echtzeitkommunikation: der GrpC kann Nachrichten in Echtzeit ohne Abruf per Push Übertragung und bietet hervorragende Unterstützung für bidirektionales Streaming.</span><span class="sxs-lookup"><span data-stu-id="f8202-172">Point-to-point real-time communication - gRPC can push messages in real time without polling and has excellent support for bi-directional streaming.</span></span>
- <span data-ttu-id="f8202-173">Eingeschränkte Netzwerkumgebungen – binäre GrpC-Nachrichten sind immer kleiner als eine entsprechende textbasierte JSON-Nachricht.</span><span class="sxs-lookup"><span data-stu-id="f8202-173">Network constrained environments – binary gRPC messages are always smaller than an equivalent text-based JSON message.</span></span>

<span data-ttu-id="f8202-174">Zum Zeitpunkt der Erstellung dieses Dokuments wird GrpC hauptsächlich mit Back-End-Diensten verwendet.</span><span class="sxs-lookup"><span data-stu-id="f8202-174">At the time, of this writing, gRPC is primarily used with backend services.</span></span> <span data-ttu-id="f8202-175">Die meisten modernen Browser können das für die Unterstützung eines Front-End-GrpC-Clients erforderliche Maß an http/2-Kontrolle nicht bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="f8202-175">Most modern browsers can't provide the level of HTTP/2 control required to support a front-end gRPC client.</span></span> <span data-ttu-id="f8202-176">Das heißt, es gibt eine [frühe Initiative](https://devblogs.microsoft.com/aspnet/grpc-web-experiment/) , die die GrpC-Kommunikation von browserbasierten Apps ermöglicht, die mit JavaScript-oder blazor-webassemblytechnologien erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="f8202-176">That said, there's an [early initiative](https://devblogs.microsoft.com/aspnet/grpc-web-experiment/) that enables gRPC communication from browser-based apps built with JavaScript or Blazor WebAssembly technologies.</span></span> <span data-ttu-id="f8202-177">Mit dem [GrpC-Web für .net](https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-WEB.md) kann eine ASP.net Core GrpC-App GrpC-Features in Browser-apps unterstützen:</span><span class="sxs-lookup"><span data-stu-id="f8202-177">The  [gRPC-Web for .NET](https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-WEB.md) enables an ASP.NET Core gRPC app to support gRPC features in browser apps:</span></span>

- <span data-ttu-id="f8202-178">Stark typisierte, Code generierte Clients</span><span class="sxs-lookup"><span data-stu-id="f8202-178">Strongly-typed code-generated clients</span></span>
- <span data-ttu-id="f8202-179">Compact protobuf-Meldungen</span><span class="sxs-lookup"><span data-stu-id="f8202-179">Compact Protobuf messages</span></span>
- <span data-ttu-id="f8202-180">Serverstreaming</span><span class="sxs-lookup"><span data-stu-id="f8202-180">Server streaming</span></span>

## <a name="grpc-implementation"></a><span data-ttu-id="f8202-181">GrpC-Implementierung</span><span class="sxs-lookup"><span data-stu-id="f8202-181">gRPC implementation</span></span>

<span data-ttu-id="f8202-182">Die microservice Reference Architecture, [eShop on Containers](https://github.com/dotnet-architecture/eShopOnContainers), von Microsoft, zeigt, wie Sie GrpC-Dienste in .net Core-Anwendungen implementieren.</span><span class="sxs-lookup"><span data-stu-id="f8202-182">The microservice reference architecture, [eShop on Containers](https://github.com/dotnet-architecture/eShopOnContainers), from Microsoft, shows how to implement gRPC services in .NET Core applications.</span></span> <span data-ttu-id="f8202-183">In Abbildung 4-22 wird die Back-End-Architektur dargestellt.</span><span class="sxs-lookup"><span data-stu-id="f8202-183">Figure 4-22 presents the back-end architecture.</span></span>

![Back-End-Architektur für den eShop in Containern](./media/eshop-with-aggregators.png)

<span data-ttu-id="f8202-185">**Abbildung 4-22.**</span><span class="sxs-lookup"><span data-stu-id="f8202-185">**Figure 4-22**.</span></span> <span data-ttu-id="f8202-186">Back-End-Architektur für den eShop in Containern</span><span class="sxs-lookup"><span data-stu-id="f8202-186">Backend architecture for eShop on Containers</span></span>

<span data-ttu-id="f8202-187">Beachten Sie in der obigen Abbildung, wie der eShop das Back-End [für Front](https://docs.microsoft.com/azure/architecture/patterns/backends-for-frontends) -End-Muster (BFF) durch Bereitstellen mehrerer API-Gateways einnimmt.</span><span class="sxs-lookup"><span data-stu-id="f8202-187">In the previous figure, note how eShop embraces the [Backend for Frontends pattern](https://docs.microsoft.com/azure/architecture/patterns/backends-for-frontends) (BFF) by exposing multiple API gateways.</span></span> <span data-ttu-id="f8202-188">Wir haben das BFF-Muster bereits weiter oben in diesem Kapitel erläutert.</span><span class="sxs-lookup"><span data-stu-id="f8202-188">We discussed the BFF pattern earlier in this chapter.</span></span> <span data-ttu-id="f8202-189">Achten Sie auf den Aggregator-mikroservice (grau), der zwischen dem Web-Shopping-API-Gateway und den Back-End-Einkaufs-Webdiensten liegt.</span><span class="sxs-lookup"><span data-stu-id="f8202-189">Pay close attention to the Aggregator microservice (in gray) that sits between the Web-Shopping API Gateway and backend Shopping microservices.</span></span> <span data-ttu-id="f8202-190">Der Aggregator empfängt eine einzelne Anforderung von einem Client, verteilt ihn an verschiedene mikrodienste, aggregiert die Ergebnisse und sendet Sie an den anfordernden Client zurück.</span><span class="sxs-lookup"><span data-stu-id="f8202-190">The Aggregator receives a single request from a client, dispatches it to various microservices, aggregates the results, and sends them back to the requesting client.</span></span> <span data-ttu-id="f8202-191">Diese Vorgänge erfordern in der Regel eine synchrone Kommunikation, die eine sofortige Antwort erzeugt.</span><span class="sxs-lookup"><span data-stu-id="f8202-191">Such operations typically require synchronous communication as to produce an immediate response.</span></span> <span data-ttu-id="f8202-192">Im eShop werden Back-End-Aufrufe vom Aggregator mithilfe von GrpC ausgeführt, wie in Abbildung 4-23 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="f8202-192">In eShop, backend calls from the Aggregator are performed using gRPC as shown in Figure 4-23.</span></span>

![GrpC in eShop in Containern](./media/grpc-implementation.png)

<span data-ttu-id="f8202-194">**Abbildung 4-23.**</span><span class="sxs-lookup"><span data-stu-id="f8202-194">**Figure 4-23**.</span></span> <span data-ttu-id="f8202-195">GrpC in eShop in Containern</span><span class="sxs-lookup"><span data-stu-id="f8202-195">gRPC in eShop on Containers</span></span>

<span data-ttu-id="f8202-196">die GrpC-Kommunikation erfordert Client-und Serverkomponenten.</span><span class="sxs-lookup"><span data-stu-id="f8202-196">gRPC communication requires both client and server components.</span></span> <span data-ttu-id="f8202-197">Beachten Sie in der obigen Abbildung, wie der Einkaufs Aggregator einen GrpC-Client implementiert.</span><span class="sxs-lookup"><span data-stu-id="f8202-197">In the previous figure, note how the Shopping Aggregator implements a gRPC client.</span></span> <span data-ttu-id="f8202-198">Der Client führt synchrone GrpC-Aufrufe (in rot) für Back-End-Dienste aus, von denen jeder einen GrpC-Server implementiert.</span><span class="sxs-lookup"><span data-stu-id="f8202-198">The client makes synchronous gRPC calls (in red) to backend microservices, each of which implement a gRPC server.</span></span> <span data-ttu-id="f8202-199">Sowohl der Client als auch der Server nutzen die integrierten GrpC-Anlagen aus der .net Core SDK.</span><span class="sxs-lookup"><span data-stu-id="f8202-199">Both the client and server take advantage of the built-in gRPC plumbing from the .NET Core SDK.</span></span> <span data-ttu-id="f8202-200">Client seitige *stubdas* bietet die Grundlagen zum Aufrufen von Remote-GrpC-aufrufen.</span><span class="sxs-lookup"><span data-stu-id="f8202-200">Client-side *stubs* provide the plumbing to invoke remote gRPC calls.</span></span> <span data-ttu-id="f8202-201">Server seitige Komponenten bieten eine GrpC-Bereitstellung, die von benutzerdefinierten Dienst Klassen geerbt und genutzt werden kann.</span><span class="sxs-lookup"><span data-stu-id="f8202-201">Server-side components provide gRPC plumbing that custom service classes can inherit and consume.</span></span>

<span data-ttu-id="f8202-202">Für Mikro Dienste, die sowohl eine Rest-API als auch eine GrpC-Kommunikation verfügbar machen, sind mehrere Endpunkte erforderlich, um den</span><span class="sxs-lookup"><span data-stu-id="f8202-202">Microservices that expose both a RESTful API and gRPC communication require multiple endpoints to manage traffic.</span></span> <span data-ttu-id="f8202-203">Öffnen Sie einen Endpunkt, der HTTP-Datenverkehr für die Rest-Aufrufe und einen weiteren für GrpC-Aufrufe abhört.</span><span class="sxs-lookup"><span data-stu-id="f8202-203">You would open an endpoint that listens for HTTP traffic for the RESTful calls and another for gRPC calls.</span></span> <span data-ttu-id="f8202-204">Der GrpC-Endpunkt muss für das http/2-Protokoll konfiguriert werden, das für die GrpC-Kommunikation erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="f8202-204">The gRPC endpoint must be configured for the HTTP/2 protocol that is required for gRPC communication.</span></span>

<span data-ttu-id="f8202-205">Während wir uns bemühen, die subdienste mit asynchronen Kommunikationsmustern zu entkoppeln, sind für einige Vorgänge direkte Aufrufe erforderlich.</span><span class="sxs-lookup"><span data-stu-id="f8202-205">While we strive to decouple microservices with asynchronous communication patterns, some operations require direct calls.</span></span> <span data-ttu-id="f8202-206">GrpC sollte die primäre Wahl für die direkte synchrone Kommunikation zwischen den-Diensten sein.</span><span class="sxs-lookup"><span data-stu-id="f8202-206">gRPC should be the primary choice for direct synchronous communication between microservices.</span></span> <span data-ttu-id="f8202-207">Das leistungsstarke Kommunikationsprotokoll, das auf http/2-und Protokoll Puffern basiert, ist eine perfekte Wahl.</span><span class="sxs-lookup"><span data-stu-id="f8202-207">Its high-performance communication protocol, based on HTTP/2 and protocol buffers, make it a perfect choice.</span></span>

## <a name="looking-ahead"></a><span data-ttu-id="f8202-208">Im voraus</span><span class="sxs-lookup"><span data-stu-id="f8202-208">Looking ahead</span></span>

<span data-ttu-id="f8202-209">Wenn Sie sich im Vorfeld befinden, wird der GrpC weiterhin für cloudnative Systeme verwendet.</span><span class="sxs-lookup"><span data-stu-id="f8202-209">Looking ahead, gRPC will continue to gain traction for cloud-native systems.</span></span> <span data-ttu-id="f8202-210">Die Leistungsvorteile und die einfache Entwicklung sind von nutzen.</span><span class="sxs-lookup"><span data-stu-id="f8202-210">The performance benefits and ease of development are compelling.</span></span> <span data-ttu-id="f8202-211">Rest wird jedoch wahrscheinlich über einen längeren Zeitraum herumlaufen.</span><span class="sxs-lookup"><span data-stu-id="f8202-211">However, REST will likely be around for a long time.</span></span> <span data-ttu-id="f8202-212">Dies ist für öffentlich verfügbar gemachte APIs und aus Gründen der Abwärtskompatibilität hervorragend.</span><span class="sxs-lookup"><span data-stu-id="f8202-212">It excels for publicly exposed APIs and for backward compatibility reasons.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="f8202-213">[Zurück](service-to-service-communication.md)
>[Weiter](service-mesh-communication-infrastructure.md)</span><span class="sxs-lookup"><span data-stu-id="f8202-213">[Previous](service-to-service-communication.md)
[Next](service-mesh-communication-infrastructure.md)</span></span>
