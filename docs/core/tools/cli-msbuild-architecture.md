---
title: Architektur der .NET Core-Befehlszeilentools
description: Informationen zu .NET Core-Toolschichten und Änderungen der neuesten Versionen.
ms.date: 03/06/2017
ms.openlocfilehash: e1a9fe59225c17d54f6e7213d2b3c3fa70ee58e0
ms.sourcegitcommit: 73aa9653547a1cd70ee6586221f79cc29b588ebd
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 04/23/2020
ms.locfileid: "82102878"
---
# <a name="high-level-overview-of-changes-in-the-net-core-tools"></a><span data-ttu-id="43ab6-103">Allgemeine Übersicht über Änderungen in .NET Core-Tools</span><span class="sxs-lookup"><span data-stu-id="43ab6-103">High-level overview of changes in the .NET Core tools</span></span>

<span data-ttu-id="43ab6-104">Dieses Dokument beschreibt die Änderungen im Zusammenhang mit dem Verschieben von *project.json* nach MSBuild und das Projektsystem *csproj* mit Informationen zu den Änderungen an den Schichten der .NET Core-Tools und die Implementierung der CLI-Befehle.</span><span class="sxs-lookup"><span data-stu-id="43ab6-104">This document describes the changes associated with moving from *project.json* to MSBuild and the *csproj* project system with information on the changes to the layering of the .NET Core tooling and the implementation of the CLI commands.</span></span> <span data-ttu-id="43ab6-105">Diese Änderungen sind mit der Version von .NET Core SDK 1.0 und Visual Studio 2017 am 7. März 2017 aufgetreten (weitere Informationen finden Sie in der [Ankündigung](https://devblogs.microsoft.com/dotnet/announcing-net-core-tools-1-0/)), aber sie wurden zuerst mit der Version von .NET Core SDK Preview 3 implementiert.</span><span class="sxs-lookup"><span data-stu-id="43ab6-105">These changes occurred with the release of .NET Core SDK 1.0 and Visual Studio 2017 on March 7, 2017 (see the [announcement](https://devblogs.microsoft.com/dotnet/announcing-net-core-tools-1-0/)) but were initially implemented with the release of the .NET Core SDK Preview 3.</span></span>

## <a name="moving-away-from-projectjson"></a><span data-ttu-id="43ab6-106">Abkehr von „project.json“</span><span class="sxs-lookup"><span data-stu-id="43ab6-106">Moving away from project.json</span></span>

<span data-ttu-id="43ab6-107">Die größte Änderung in den Tools für .NET Core ist sicherlich die [Abkehr von „project.json“ hin zu „csproj“](https://devblogs.microsoft.com/dotnet/changes-to-project-json/) als Projektsystem.</span><span class="sxs-lookup"><span data-stu-id="43ab6-107">The biggest change in the tooling for .NET Core is certainly the [move away from project.json to csproj](https://devblogs.microsoft.com/dotnet/changes-to-project-json/) as the project system.</span></span> <span data-ttu-id="43ab6-108">Die neuesten Versionen der Befehlszeilentools unterstützen keine *project.json*-Dateien.</span><span class="sxs-lookup"><span data-stu-id="43ab6-108">The latest versions of the command-line tools don't support *project.json* files.</span></span> <span data-ttu-id="43ab6-109">Das heißt, dass diese Version nicht zum Erstellen, Ausführen und Veröffentlichen von auf „project.json“ basierenden Anwendungen und Bibliotheken verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="43ab6-109">That means that it cannot be used to build, run, or publish project.json based applications and libraries.</span></span> <span data-ttu-id="43ab6-110">Sie müssen Ihre vorhandenen Projekte migrieren oder neue Projekte starten, um diese Version der Tools verwenden zu können.</span><span class="sxs-lookup"><span data-stu-id="43ab6-110">To use this version of the tools, migrate your existing projects or start new ones.</span></span>

<span data-ttu-id="43ab6-111">Im Rahmen dieses Wechsels wurde die benutzerdefinierte Build-Engine, das zum Erstellen von „project.json“-Projekten entwickelt wurde, durch eine ausgereifte und vollausgestattete Build-Engine namens [MSBuild](https://github.com/Microsoft/msbuild) ersetzt.</span><span class="sxs-lookup"><span data-stu-id="43ab6-111">As part of this move, the custom build engine that was developed to build project.json projects was replaced with a mature and fully capable build engine called [MSBuild](https://github.com/Microsoft/msbuild).</span></span> <span data-ttu-id="43ab6-112">MSBuild ist eine in der .NET-Community bekannte Engine.</span><span class="sxs-lookup"><span data-stu-id="43ab6-112">MSBuild is a well-known engine in the .NET community.</span></span> <span data-ttu-id="43ab6-113">Dies ist seit dem ersten Release der Plattform eine wichtige Technologie.</span><span class="sxs-lookup"><span data-stu-id="43ab6-113">It has been a key technology since the platform's first release.</span></span> <span data-ttu-id="43ab6-114">Da mit MSBuild .NET Core-Anwendungen erstellt werden müssen, wurde MSBuild zu .NET Core portiert und kann auf allen Plattformen genutzt werden, auf denen .NET Core ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="43ab6-114">Because it needs to build .NET Core applications, MSBuild has been ported to .NET Core and can be used on any platform that .NET Core runs on.</span></span> <span data-ttu-id="43ab6-115">Eines der wichtigsten Ziele von .NET Core ist ein plattformübergreifender Entwicklungsstapel, und wir haben dafür gesorgt, dass auch nach diesem Wechsel dieses Ziel erfüllt wird.</span><span class="sxs-lookup"><span data-stu-id="43ab6-115">One of the main promises of .NET Core is that of a cross-platform development stack, and we have made sure that this move does not break that promise.</span></span>

> [!TIP]
> <span data-ttu-id="43ab6-116">Wenn Sie noch nicht mit MSBuild vertraut sind und mehr darüber erfahren möchten, können Sie zum Einstieg den Artikel [MSBuild-Konzepte](/visualstudio/msbuild/msbuild-concepts) lesen.</span><span class="sxs-lookup"><span data-stu-id="43ab6-116">If you are new to MSBuild and would like to learn more about it, you can start by reading the [MSBuild concepts](/visualstudio/msbuild/msbuild-concepts) article.</span></span>

## <a name="the-tooling-layers"></a><span data-ttu-id="43ab6-117">Die Toolschichten</span><span class="sxs-lookup"><span data-stu-id="43ab6-117">The tooling layers</span></span>

<span data-ttu-id="43ab6-118">Infolge der Änderung der Build-Engine und der Bewegung weg vom vorhandenen Projektsystem kamen natürlich einige Fragen auf.</span><span class="sxs-lookup"><span data-stu-id="43ab6-118">With the change in build engine and the move away from the existing project system, some questions naturally follow.</span></span> <span data-ttu-id="43ab6-119">Haben diese Änderungen Auswirkungen auf die allgemeinen „Schichten“ des .NET Core-Toolökosystems?</span><span class="sxs-lookup"><span data-stu-id="43ab6-119">Do any of these changes change the overall "layering" of the .NET Core tooling ecosystem?</span></span> <span data-ttu-id="43ab6-120">Gibt es neue Bits und Komponenten?</span><span class="sxs-lookup"><span data-stu-id="43ab6-120">Are there new bits and components?</span></span>

<span data-ttu-id="43ab6-121">Lassen Sie uns als schnelle Auffrischung mit den Schichten in Preview 2 beginnen, die die folgende Abbildung zeigt:</span><span class="sxs-lookup"><span data-stu-id="43ab6-121">Let's start with a quick refresher on Preview 2 layering as shown in the following picture:</span></span>

![Allgemeine Architektur der Preview 2-Tools](media/cli-msbuild-architecture/p2-arch.png)

<span data-ttu-id="43ab6-123">Die Schichten der Tools in Vorschauversion 2 sind unkompliziert.</span><span class="sxs-lookup"><span data-stu-id="43ab6-123">The layering of the tools in Preview 2 is straightforward.</span></span> <span data-ttu-id="43ab6-124">Die .NET Core-CLI bildet die Basis.</span><span class="sxs-lookup"><span data-stu-id="43ab6-124">At the bottom, the foundation is the .NET Core CLI.</span></span> <span data-ttu-id="43ab6-125">Alle weiteren Tools auf höherer Ebene wie beispielsweise Visual Studio oder Visual Studio Code hängen zum Erstellen von Projekten, Wiederherstellen von Abhängigkeiten usw. von der CLI ab.</span><span class="sxs-lookup"><span data-stu-id="43ab6-125">All other, higher-level tools, such as Visual Studio or Visual Studio Code, depend and rely on the CLI to build projects, restore dependencies, and so on.</span></span> <span data-ttu-id="43ab6-126">Für einen Wiederherstellungsvorgang in Visual Studio musste z. B. der Befehl `dotnet restore` in der CLI aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="43ab6-126">For example, if Visual Studio wanted to perform a restore operation, it would call into the `dotnet restore` command in the CLI.</span></span>

<span data-ttu-id="43ab6-127">Durch den Wechsel zum neuen Projektsystem ändert sich die vorherige Abbildung:</span><span class="sxs-lookup"><span data-stu-id="43ab6-127">With the move to the new project system, the previous diagram changes:</span></span>

![Grundlegende Architektur von .NET Core SDK 1.0.0](media/cli-msbuild-architecture/p3-arch.png)

<span data-ttu-id="43ab6-129">Der Hauptunterschied besteht darin, dass die CLI nicht mehr die Fundamentschicht darstellt. Diese Rolle wird jetzt von der „freigegebenen SDK-Komponente“ übernommen.</span><span class="sxs-lookup"><span data-stu-id="43ab6-129">The main difference is that the CLI is not the foundational layer anymore; this role is now filled by the "shared SDK component".</span></span> <span data-ttu-id="43ab6-130">Diese freigegebene SDK-Komponente ist eine Gruppe von Zielen und zugehörigen Aufgaben, die für das Kompilieren des Codes, dessen Veröffentlichung, das Packen von NuGet-Paketen usw. verantwortlich sind.</span><span class="sxs-lookup"><span data-stu-id="43ab6-130">This shared SDK component is a set of targets and associated tasks that are responsible for compiling code, publishing it, packing NuGet packages, and so on.</span></span> <span data-ttu-id="43ab6-131">Das .NET Core SDK ist ein Open-Source-Produkt und auf GitHub im [SDK-Repository](https://github.com/dotnet/sdk) verfügbar.</span><span class="sxs-lookup"><span data-stu-id="43ab6-131">The .NET Core SDK is open-source and is available on GitHub on the [SDK repo](https://github.com/dotnet/sdk).</span></span>

> [!NOTE]
> <span data-ttu-id="43ab6-132">Ein „Ziel“ ist ein MSBuild-Ausdruck, der einen benannten Vorgang angibt, den MSBuild aufrufen kann.</span><span class="sxs-lookup"><span data-stu-id="43ab6-132">A "target" is an MSBuild term that indicates a named operation that MSBuild can invoke.</span></span> <span data-ttu-id="43ab6-133">Es ist in der Regel an eine oder mehrere Aufgaben gekoppelt, die dem Ziel entsprechende Logik ausführen.</span><span class="sxs-lookup"><span data-stu-id="43ab6-133">It is usually coupled with one or more tasks that execute some logic that the target is supposed to do.</span></span> <span data-ttu-id="43ab6-134">MSBuild unterstützt viele vorgefertigte Ziele, z.B. `Copy` oder `Execute`. Außerdem können Benutzer mithilfe von verwaltetem Code eigene Aufgaben schreiben und Ziele definieren, um diese Aufgaben ausführen.</span><span class="sxs-lookup"><span data-stu-id="43ab6-134">MSBuild supports many ready-made targets such as `Copy` or `Execute`; it also allows users to write their own tasks using managed code and define targets to execute those tasks.</span></span> <span data-ttu-id="43ab6-135">Weitere Informationen finden Sie unter [MSBuild-Aufgaben](/visualstudio/msbuild/msbuild-tasks).</span><span class="sxs-lookup"><span data-stu-id="43ab6-135">For more information, see [MSBuild tasks](/visualstudio/msbuild/msbuild-tasks).</span></span>

<span data-ttu-id="43ab6-136">Alle Toolsets nutzen nun die freigegebene SDK-Komponente und ihre Ziele. Das gibt auch für die CLI.</span><span class="sxs-lookup"><span data-stu-id="43ab6-136">All the toolsets now consume the shared SDK component and its targets, CLI included.</span></span> <span data-ttu-id="43ab6-137">Visual Studio 2019 ruft beispielsweise nicht den `dotnet restore`-Befehl auf, um Abhängigkeiten für .NET Core-Projekte wiederherzustellen.</span><span class="sxs-lookup"><span data-stu-id="43ab6-137">For example, Visual Studio 2019 doesn't call into the `dotnet restore` command to restore dependencies for .NET Core projects.</span></span> <span data-ttu-id="43ab6-138">Stattdessen wird direkt das Ziel „Wiederherstellen“ verwendet.</span><span class="sxs-lookup"><span data-stu-id="43ab6-138">Instead, it uses the "Restore" target directly.</span></span> <span data-ttu-id="43ab6-139">Da es sich MSBuild-Ziele handelt, können Sie MSBuild auch „roh“ verwenden, um sie mit dem Befehl [dotnet msbuild](dotnet-msbuild.md) auszuführen.</span><span class="sxs-lookup"><span data-stu-id="43ab6-139">Since these are MSBuild targets, you can also use raw MSBuild to execute them using the [dotnet msbuild](dotnet-msbuild.md) command.</span></span>

### <a name="cli-commands"></a><span data-ttu-id="43ab6-140">CLI-Befehle</span><span class="sxs-lookup"><span data-stu-id="43ab6-140">CLI commands</span></span>

<span data-ttu-id="43ab6-141">Die freigegebene SDK-Komponente bedeutet, dass die meisten vorhandenen CLI-Befehle als MSBuild-Aufgaben und -Ziele neu implementiert wurden.</span><span class="sxs-lookup"><span data-stu-id="43ab6-141">The shared SDK component means that the majority of existing CLI commands have been reimplemented as MSBuild tasks and targets.</span></span> <span data-ttu-id="43ab6-142">Was bedeutet dies für die CLI-Befehle und Ihre Nutzung des Toolsets?</span><span class="sxs-lookup"><span data-stu-id="43ab6-142">What does this mean for the CLI commands and your usage of the toolset?</span></span>

<span data-ttu-id="43ab6-143">Aus Benutzersicht ändert sich die Art der Verwendung der CLI nicht.</span><span class="sxs-lookup"><span data-stu-id="43ab6-143">From a usage perspective, it doesn't change the way you use the CLI.</span></span> <span data-ttu-id="43ab6-144">Die CLI weist noch immer die Hauptbefehle auf, die im Release der .NET Core 1.0-Vorschauversion 2 vorhanden waren:</span><span class="sxs-lookup"><span data-stu-id="43ab6-144">The CLI still has the core commands that existed in the .NET Core 1.0 Preview 2 release:</span></span>

- `new`
- `restore`
- `run`
- `build`
- `publish`
- `test`
- `pack`

<span data-ttu-id="43ab6-145">Diese Befehle werden weiter wie erwartet ausgeführt (Erstellen, Veröffentlichen, Packen eines Projekts usw.).</span><span class="sxs-lookup"><span data-stu-id="43ab6-145">These commands still do what you expect them to do (new up a project, build it, publish it, pack it, and so on).</span></span> <span data-ttu-id="43ab6-146">Sie können sich entweder mithilfe des Hilfebildschirms des Befehls (mit `dotnet <command> --help`) oder der Dokumentation auf dieser Website mit dem Verhalten der Befehle vertraut machen.</span><span class="sxs-lookup"><span data-stu-id="43ab6-146">You can consult either the command's help screen (using `dotnet <command> --help`) or documentation on this site to get familiar with their behavior.</span></span>

<span data-ttu-id="43ab6-147">Hinsichtlich der Ausführung verwenden die CLI-Befehle ihre Parameter und erstellen einen Aufruf an „rohes“ MSBuild, woraufhin das Modul die benötigten Eigenschaften festlegt und das gewünschte Ziel ausführt.</span><span class="sxs-lookup"><span data-stu-id="43ab6-147">From an execution perspective, the CLI commands take their parameters and construct a call to "raw" MSBuild that sets the needed properties and runs the desired target.</span></span> <span data-ttu-id="43ab6-148">Um dies besser zu veranschaulichen, betrachten Sie den folgenden Befehl:</span><span class="sxs-lookup"><span data-stu-id="43ab6-148">To better illustrate this, consider the following command:</span></span>

   ```dotnetcli
   dotnet publish -o pub -c Release
   ```

<span data-ttu-id="43ab6-149">Mit diesem Befehl wird eine Anwendung im Ordner `pub` mithilfe der Konfiguration „Release“ veröffentlicht.</span><span class="sxs-lookup"><span data-stu-id="43ab6-149">This command publishes an application into a `pub` folder using the "Release" configuration.</span></span> <span data-ttu-id="43ab6-150">Intern wird dieser Befehl in den folgenden MSBuild-Aufruf übersetzt:</span><span class="sxs-lookup"><span data-stu-id="43ab6-150">Internally, this command gets translated into the following MSBuild invocation:</span></span>

   ```dotnetcli
   dotnet msbuild -t:Publish -p:OutputPath=pub -p:Configuration=Release
   ```

<span data-ttu-id="43ab6-151">Relevante Ausnahmen für diese Regel sind die Befehle `new` und `run`.</span><span class="sxs-lookup"><span data-stu-id="43ab6-151">Notable exceptions to this rule are the `new` and `run` commands.</span></span> <span data-ttu-id="43ab6-152">Sie wurden nicht als MSBuild-Ziele implementiert.</span><span class="sxs-lookup"><span data-stu-id="43ab6-152">They have not been implemented as MSBuild targets.</span></span>

### <a name="implicit-restore"></a><span data-ttu-id="43ab6-153">Implizite Wiederherstellung</span><span class="sxs-lookup"><span data-stu-id="43ab6-153">Implicit restore</span></span>

[!INCLUDE[DotNet Restore Note](~/includes/dotnet-restore-note.md)]
