---
title: '.NET Compiler Platform SDK: Konzepte und Objektmodell'
description: In dieser Übersicht erhalten Sie die nötigen Hintergrundinformationen, damit Sie effektiv mit dem .NET Compiler SDK arbeiten können. Erfahren Sie mehr über API-Ebenen, die wichtigsten beteiligten Typen und das gesamte Objektmodell.
ms.date: 10/10/2017
ms.custom: mvc
ms.openlocfilehash: 529ce6fbdef22964251c8b22abbd5d8aadab633d
ms.sourcegitcommit: fff146ba3fd1762c8c432d95c8b877825ae536fc
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 05/08/2020
ms.locfileid: "82975939"
---
# <a name="understand-the-net-compiler-platform-sdk-model"></a><span data-ttu-id="c960a-104">Verstehen des .NET Compiler Platform SDK-Modells</span><span class="sxs-lookup"><span data-stu-id="c960a-104">Understand the .NET Compiler Platform SDK model</span></span>

<span data-ttu-id="c960a-105">Compiler verarbeiten den von Ihnen geschriebenen Code, indem sie sich an strenge Regeln halten, die sich häufig von der Weise unterscheiden, wie Menschen Code lesen und verstehen.</span><span class="sxs-lookup"><span data-stu-id="c960a-105">Compilers process the code you write following structured rules that often differ from the way humans read and understand code.</span></span> <span data-ttu-id="c960a-106">Es ist wichtig, dass Sie über grundlegende Kenntnisse zur Funktionsweise des vom Compiler verwendeten Modells verfügen, damit Sie ein Verständnis über die APIs erlangen, die Sie zum Erstellen von Roslyn-basierten Tools verwenden.</span><span class="sxs-lookup"><span data-stu-id="c960a-106">A basic understanding of the model used by compilers is essential to understanding the APIs you use when building Roslyn-based tools.</span></span>

## <a name="compiler-pipeline-functional-areas"></a><span data-ttu-id="c960a-107">Funktionsbereiche der Compilerpipeline</span><span class="sxs-lookup"><span data-stu-id="c960a-107">Compiler pipeline functional areas</span></span>

<span data-ttu-id="c960a-108">Das .NET Compiler Platform SDK stellt Ihnen als Consumer die Codeanalyse des Compilers für C# und Visual Basic zur Verfügung, indem es eine API-Ebene bereitstellt, die eine traditionelle Compilerpipeline nachahmt.</span><span class="sxs-lookup"><span data-stu-id="c960a-108">The .NET Compiler Platform SDK exposes the C# and Visual Basic compilers' code analysis to you as a consumer by providing an API layer that mirrors a traditional compiler pipeline.</span></span>

![Schritte der Compilerpipeline, die Quellcode in Objektcode verarbeitet](media/compiler-api-model/compiler-pipeline.png)

<span data-ttu-id="c960a-110">Jede Phase dieser Pipeline stellt eine separate Komponente dar.</span><span class="sxs-lookup"><span data-stu-id="c960a-110">Each phase of this pipeline is a separate component.</span></span> <span data-ttu-id="c960a-111">Zunächst wird in der Analysephase Quelltext in Token zerlegt und analysiert, sodass eine Syntax entsteht, die der Grammatik der Sprache entspricht.</span><span class="sxs-lookup"><span data-stu-id="c960a-111">First, the parse phase tokenizes and parses source text into syntax that follows the language grammar.</span></span> <span data-ttu-id="c960a-112">Dann werden in der Deklarationsphase die Quelle und importierte Metadaten analysiert, sodass sie benannte Symbole formen.</span><span class="sxs-lookup"><span data-stu-id="c960a-112">Second, the declaration phase analyzes source and imported metadata to form named symbols.</span></span> <span data-ttu-id="c960a-113">In der Bindungsphase werden Bezeichner im Code Symbolen zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="c960a-113">Next, the bind phase matches identifiers in the code to symbols.</span></span> <span data-ttu-id="c960a-114">Zuletzt werden in der Ausgabephase Assemblys mit sämtlichen Informationen ausgegeben, die vom Compiler erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="c960a-114">Finally, the emit phase emits an assembly with all the information built up by the compiler.</span></span>

![Über die API der Compilerpipeline wird Zugriff auf sämtliche Schritte gewährt, die Bestandteil der Compilerpipeline sind.](media/compiler-api-model/compiler-pipeline-api.png)

<span data-ttu-id="c960a-116">Für jede dieser Phasen stellt das .NET Compiler Platform SDK ein Objektmodell zur Verfügung, das Zugriff auf die Informationen zu der jeweiligen Phase gewährt.</span><span class="sxs-lookup"><span data-stu-id="c960a-116">Corresponding to each of those phases, the .NET Compiler Platform SDK exposes an object model that allows access to the information at that phase.</span></span> <span data-ttu-id="c960a-117">In der Analysephase wird eine Syntaxstruktur zur Verfügung gestellt, in der Deklarationsphase eine hierarchische Symboltabelle, in der Bindungsphase das Ergebnis der semantischen Analyse des Compilers, und die Ausgabephase besteht aus einer API, die IL-Bytecode erstellt.</span><span class="sxs-lookup"><span data-stu-id="c960a-117">The parsing phase exposes a syntax tree, the declaration phase exposes a hierarchical symbol table, the binding phase exposes the result of the compiler’s semantic analysis, and the emit phase is an API that produces IL byte codes.</span></span>

![Die über die Compiler-API zugänglichen Sprachdienste bei jedem Schritt der Compilerpipeline](media/compiler-api-model/compiler-pipeline-lang-svc.png)

<span data-ttu-id="c960a-119">Jeder Compiler vereint diese Komponenten zu einem End-to-End-Objekt.</span><span class="sxs-lookup"><span data-stu-id="c960a-119">Each compiler combines these components together as a single end-to-end whole.</span></span>

<span data-ttu-id="c960a-120">Bei diesen APIs handelt es sich um dieselben, die von Visual Studio verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="c960a-120">These APIs are the same ones used by Visual Studio.</span></span> <span data-ttu-id="c960a-121">Beispielsweise verwenden die Komponenten, die den Code gliedern und formatieren, die Syntaxstrukturen. Der Objektkatalog und die Navigationskomponenten verwenden die Symboltabelle, beim Refactoring und bei Gehe zu Definitionen werden Semantikmodelle verwendet und „Bearbeiten und Fortfahren“ verwendet all diese Elemente, einschließlich der Ausgabe-API.</span><span class="sxs-lookup"><span data-stu-id="c960a-121">For instance, the code outlining and formatting features use the syntax trees, the Object Browser and navigation features use the symbol table, refactorings and Go to Definition use the semantic model, and Edit and Continue uses all of these, including the Emit API.</span></span>

## <a name="api-layers"></a><span data-ttu-id="c960a-122">API-Ebenen</span><span class="sxs-lookup"><span data-stu-id="c960a-122">API layers</span></span>

<span data-ttu-id="c960a-123">Das .NET-Compiler SDK besteht aus zwei Hauptebenen von APIs: Compiler-APIs und Arbeitsbereich-APIs.</span><span class="sxs-lookup"><span data-stu-id="c960a-123">The .NET compiler SDK consists of two main layers of APIs: compiler APIs and workspaces APIs.</span></span>

![Die API-Ebenen, die von den APIs der Compilerpipeline dargestellt werden](media/compiler-api-model/api-layers.png)

### <a name="compiler-apis"></a><span data-ttu-id="c960a-125">Compiler-APIs</span><span class="sxs-lookup"><span data-stu-id="c960a-125">Compiler APIs</span></span>

<span data-ttu-id="c960a-126">Die Compilerebene enthält die Objektmodelle, die mit den Informationen syntaktisch und semantisch übereinstimmen, die in den einzelnen Phasen der Compilerpipeline zur Verfügung gestellt werden.</span><span class="sxs-lookup"><span data-stu-id="c960a-126">The compiler layer contains the object models that correspond to information exposed at each phase of the compiler pipeline, both syntactic and semantic.</span></span> <span data-ttu-id="c960a-127">Die Compilerebene enthält außerdem eine nicht veränderbare Momentaufnahme eines einzelnen Aufrufs eines Compilers, einschließlich Assemblyverweisen, Compileroptionen und Quellcodedateien.</span><span class="sxs-lookup"><span data-stu-id="c960a-127">The compiler layer also contains an immutable snapshot of a single invocation of a compiler, including assembly references, compiler options, and source code files.</span></span> <span data-ttu-id="c960a-128">Es gibt zwei unterschiedliche APIs, die die Sprachen C# und Visual Basic darstellen.</span><span class="sxs-lookup"><span data-stu-id="c960a-128">There are two distinct APIs that represent the C# language and the Visual Basic language.</span></span> <span data-ttu-id="c960a-129">Diese beiden APIs haben eine ähnliche Form, aber sind auf die treue Wiedergabe der einzelnen Sprachen ausgerichtet.</span><span class="sxs-lookup"><span data-stu-id="c960a-129">These two APIs are similar in shape but tailored for high-fidelity to each individual language.</span></span> <span data-ttu-id="c960a-130">Diese Ebene ist unabhängig von Visual Studio-Komponenten.</span><span class="sxs-lookup"><span data-stu-id="c960a-130">This layer has no dependencies on Visual Studio components.</span></span>

### <a name="diagnostic-apis"></a><span data-ttu-id="c960a-131">Diagnose-APIs</span><span class="sxs-lookup"><span data-stu-id="c960a-131">Diagnostic APIs</span></span>

<span data-ttu-id="c960a-132">Im Rahmen einer Analyse erstellt der Compiler möglicherweise mehrere Diagnosen, die angefangen bei Syntax, Semantik und eindeutigen Zuweisungsfehlern bis hin zu Warnungen und informativen Diagnosen alles abdecken.</span><span class="sxs-lookup"><span data-stu-id="c960a-132">As part of its analysis the compiler may produce a set of diagnostics covering everything from syntax, semantic, and definite assignment errors to various warnings and informational diagnostics.</span></span> <span data-ttu-id="c960a-133">Die API-Ebene des Compilers stellt über eine erweiterbare API Diagnosen zur Verfügung, über die benutzerdefinierte Analysetools an den Kompilierungsprozess angeschlossen werden.</span><span class="sxs-lookup"><span data-stu-id="c960a-133">The Compiler API layer exposes diagnostics through an extensible API that allows user-defined analyzers to be plugged into the compilation process.</span></span> <span data-ttu-id="c960a-134">Außerdem können dadurch neben compilerdefinierten Diagnosen benutzerdefinierte Diagnosen erstellt werden, die z.B. von Tools wie StyleCop oder FxCop erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="c960a-134">It allows user-defined diagnostics, such as those produced by tools like StyleCop or FxCop, to be produced alongside compiler-defined diagnostics.</span></span> <span data-ttu-id="c960a-135">Wenn Diagnosen so erstellt werden, hat das den Vorteil, dass diese auf natürliche Weise in Tools wie MSBuild und Visual Studio integriert werden. Diese Tools sind von Diagnosen abhängig, um z.B. einen Buildvorgang anhand von Richtlinien anzuhalten oder um Wellenlinien im Editor anzuzeigen und Behebungen von Codefehlern vorzuschlagen.</span><span class="sxs-lookup"><span data-stu-id="c960a-135">Producing diagnostics in this way has the benefit of integrating naturally with tools such as MSBuild and Visual Studio which depend on diagnostics for experiences such as halting a build based on policy and showing live squiggles in the editor and suggesting code fixes.</span></span>

### <a name="scripting-apis"></a><span data-ttu-id="c960a-136">Erstellung von API-Skripts</span><span class="sxs-lookup"><span data-stu-id="c960a-136">Scripting APIs</span></span>

<span data-ttu-id="c960a-137">Das Hosten und Scripting von APIs geschieht auf Compilerebene.</span><span class="sxs-lookup"><span data-stu-id="c960a-137">Hosting and scripting APIs are part of the compiler layer.</span></span> <span data-ttu-id="c960a-138">Sie können sie verwenden, um Codeausschnitte auszuführen und um Ausführungskontext zur Runtime zu sammeln.</span><span class="sxs-lookup"><span data-stu-id="c960a-138">You can use them for executing code snippets and accumulating a runtime execution context.</span></span>
<span data-ttu-id="c960a-139">Die interaktive C#-REPL (read–eval–print loop) verwendet diese APIs.</span><span class="sxs-lookup"><span data-stu-id="c960a-139">The C# interactive REPL (Read-Evaluate-Print Loop) uses these APIs.</span></span> <span data-ttu-id="c960a-140">Mithilfe der REPL können Sie C# als Skriptsprache verwenden und den Code beim Schreiben interaktiv ausführen.</span><span class="sxs-lookup"><span data-stu-id="c960a-140">The REPL enables you to use C# as a scripting language, executing the code interactively as you write it.</span></span>

### <a name="workspaces-apis"></a><span data-ttu-id="c960a-141">Arbeitsbereich-APIs</span><span class="sxs-lookup"><span data-stu-id="c960a-141">Workspaces APIs</span></span>

<span data-ttu-id="c960a-142">Die Arbeitsbereich-API ist auf Arbeitsbereichebene enthalten. Sie stellt einen Startpunkt für die Codeanalyse und das Refactoring ganzer Projektmappen dar.</span><span class="sxs-lookup"><span data-stu-id="c960a-142">The Workspaces layer contains the Workspace API, which is the starting point for doing code analysis and refactoring over entire solutions.</span></span> <span data-ttu-id="c960a-143">Sie unterstützt Sie bei der Aufteilung der Informationen zu den Projekten in einer Projektmappe in einzelne Objektmodelle, gewährt Ihnen direkten Zugriff auf die Objektmodelle auf Compilerebene, ohne dabei Dateien zu analysieren, Optionen zu konfigurieren oder Abhängigkeit zwischen einzelnen Projekten zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="c960a-143">It assists you in organizing all the information about the projects in a solution into a single object model, offering you direct access to the compiler layer object models without needing to parse files, configure options, or manage project-to-project dependencies.</span></span>

<span data-ttu-id="c960a-144">Außerdem befinden sich auf Arbeitsbereichsebene mehrere APIs, die bei der Implementierung von Codeanalysen und beim Refactoring von Tools verwendet werden, die in einer Hostumgebung wie der Visual Studio-IDE funktionieren.</span><span class="sxs-lookup"><span data-stu-id="c960a-144">In addition, the Workspaces layer surfaces a set of APIs used when implementing code analysis and refactoring tools that function within a host environment like the Visual Studio IDE.</span></span> <span data-ttu-id="c960a-145">Nehmen Sie „Alle Verweise suchen“-, „Formatieren“- und Codegenerierungs-APIs als Beispiele.</span><span class="sxs-lookup"><span data-stu-id="c960a-145">Examples include the Find All References, Formatting, and Code Generation APIs.</span></span>

<span data-ttu-id="c960a-146">Diese Ebene ist unabhängig von Visual Studio-Komponenten.</span><span class="sxs-lookup"><span data-stu-id="c960a-146">This layer has no dependencies on Visual Studio components.</span></span>
