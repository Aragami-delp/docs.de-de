---
title: Schützen von Verbindungsinformationen
description: Erfahren Sie mehr über Sicherheitsrisiken in Verbindungs Zeichenfolgen, die auftreten können, wenn Verbindungs Zeichenfolgen erstellt und beibehalten werden und Authentifizierungstyp.
ms.date: 03/30/2017
ms.assetid: 1471f580-bcd4-4046-bdaf-d2541ecda2f4
ms.openlocfilehash: 0e693fd99384a2808a621b358f8e70c6777c3930
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/02/2020
ms.locfileid: "84286649"
---
# <a name="protecting-connection-information"></a><span data-ttu-id="8199a-103">Schützen von Verbindungsinformationen</span><span class="sxs-lookup"><span data-stu-id="8199a-103">Protecting Connection Information</span></span>
<span data-ttu-id="8199a-104">Eines der wichtigsten Ziele beim Sichern einer Anwendung besteht darin, den Zugriff auf die Datenquelle zu schützen.</span><span class="sxs-lookup"><span data-stu-id="8199a-104">Protecting access to your data source is one of the most important goals when securing an application.</span></span> <span data-ttu-id="8199a-105">Eine Verbindungszeichenfolge stellt ein potenzielles Sicherheitsrisiko dar, wenn sie nicht gesichert wird.</span><span class="sxs-lookup"><span data-stu-id="8199a-105">A connection string presents a potential vulnerability if it is not secured.</span></span> <span data-ttu-id="8199a-106">Das Speichern von Verbindungsinformationen als Klartext oder das Aufbewahren dieser Informationen im Arbeitsspeicher gefährdet Ihr gesamtes System.</span><span class="sxs-lookup"><span data-stu-id="8199a-106">Storing connection information in plain text or persisting it in memory risks compromising your entire system.</span></span> <span data-ttu-id="8199a-107">In den Quellcode eingebettete Verbindungs Zeichenfolgen können mithilfe von [Ildasm. exe (IL-Disassembler)](../../tools/ildasm-exe-il-disassembler.md) gelesen werden, um Microsoft Intermediate Language (MSIL) in einer kompilierten Assembly anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="8199a-107">Connection strings embedded in your source code can be read using the [Ildasm.exe (IL Disassembler)](../../tools/ildasm-exe-il-disassembler.md) to view Microsoft intermediate language (MSIL) in a compiled assembly.</span></span>  
  
 <span data-ttu-id="8199a-108">Welche Sicherheitsrisiken sich im Zusammenhang mit Verbindungszeichenfolgen ergeben, hängt von der Art der verwendeten Authentifizierung, der Art und Weise, wie die Verbindungszeichenfolgen im Arbeitsspeicher und auf der Festplatte aufbewahrt werden, und den Verfahren ab, mit denen die Verbindungszeichenfolgen zur Laufzeit konstruiert werden.</span><span class="sxs-lookup"><span data-stu-id="8199a-108">Security vulnerabilities involving connection strings can arise based on the type of authentication used, how connection strings are persisted in memory and on disk, and the techniques used to construct them at run time.</span></span>  
  
## <a name="use-windows-authentication"></a><span data-ttu-id="8199a-109">Windows-Authentifizierung verwenden</span><span class="sxs-lookup"><span data-stu-id="8199a-109">Use Windows Authentication</span></span>  
 <span data-ttu-id="8199a-110">Damit der Zugriff auf die Datenquelle geschützt bleibt, müssen Sie Verbindungsinformationen wie Benutzer-ID, Kennwort und den Namen der Datenquelle sichern.</span><span class="sxs-lookup"><span data-stu-id="8199a-110">To help limit access to your data source, you must secure connection information such as user ID, password, and data source name.</span></span> <span data-ttu-id="8199a-111">Um das verfügbar machen von Benutzerinformationen zu vermeiden, empfiehlt es sich, nach Möglichkeit die Windows-Authentifizierung (manchmal auch als *integrierte Sicherheit*bezeichnet) zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="8199a-111">In order to avoid exposing user information, we recommend using Windows authentication (sometimes referred to as *integrated security*) wherever possible.</span></span> <span data-ttu-id="8199a-112">Die Windows-Authentifizierung wird in einer Verbindungszeichenfolge mit dem Schlüsselwort `Integrated Security` oder `Trusted_Connection` angegeben, sodass weder eine Benutzer-ID noch ein Kennwort verwendet werden muss.</span><span class="sxs-lookup"><span data-stu-id="8199a-112">Windows authentication is specified in a connection string by using the `Integrated Security` or `Trusted_Connection` keywords, eliminating the need to use a user ID and password.</span></span> <span data-ttu-id="8199a-113">Bei Verwendung der Windows-Authentifizierung werden die Benutzer von Windows authentifiziert, und der Zugriff auf Server- und Datenbankressourcen wird durch die Erteilung von Berechtigungen für Windows-Benutzer und -Gruppen gesteuert.</span><span class="sxs-lookup"><span data-stu-id="8199a-113">When using Windows authentication, users are authenticated by Windows, and access to server and database resources is determined by granting permissions to Windows users and groups.</span></span>  
  
 <span data-ttu-id="8199a-114">Dort, wo die Windows-Authentifizierung nicht verwendet werden kann, müssen Sie besondere Vorsicht walten lassen, da die Verbindungszeichenfolge Benutzeranmeldeinformationen enthält, die offen zugänglich sind.</span><span class="sxs-lookup"><span data-stu-id="8199a-114">For situations where it is not possible to use Windows authentication, you must use extra care because user credentials are exposed in the connection string.</span></span> <span data-ttu-id="8199a-115">In ASP.NET-Anwendungen können Sie ein Windows-Konto als feste Identität konfigurieren, die dann für Verbindungen mit Datenbanken und anderen Netzwerkressourcen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="8199a-115">In an ASP.NET application, you can configure a Windows account as a fixed identity that is used to connect to databases and other network resources.</span></span> <span data-ttu-id="8199a-116">Sie aktivieren den Identitätswechsel im Identity-Element in der Datei " **Web. config** " und geben einen Benutzernamen und ein Kennwort an.</span><span class="sxs-lookup"><span data-stu-id="8199a-116">You enable impersonation in the identity element in the **web.config** file and specify a user name and password.</span></span>  
  
```xml  
<identity impersonate="true"
        userName="MyDomain\UserAccount"
        password="*****" />  
```  
  
 <span data-ttu-id="8199a-117">Das Konto mit der festen Identität sollte nur über die nötigsten Berechtigungen für die Datenbank verfügen.</span><span class="sxs-lookup"><span data-stu-id="8199a-117">The fixed identity account should be a low-privilege account that has been granted only necessary permissions in the database.</span></span> <span data-ttu-id="8199a-118">Außerdem sollten Sie die Konfigurationsdatei verschlüsseln, sodass der Benutzername und das Kennwort nicht als Klartext verfügbar gemacht werden.</span><span class="sxs-lookup"><span data-stu-id="8199a-118">In addition, you should encrypt the configuration file so that the user name and password are not exposed in clear text.</span></span>  
  
## <a name="do-not-use-universal-data-link-udl-files"></a><span data-ttu-id="8199a-119">Verwenden Sie keine UDL-Dateien (Universal Data Link)</span><span class="sxs-lookup"><span data-stu-id="8199a-119">Do Not Use Universal Data Link (UDL) files</span></span>  
 <span data-ttu-id="8199a-120">Vermeiden Sie, Verbindungszeichenfolgen für eine <xref:System.Data.OleDb.OleDbConnection> in einer UDL-Datei (Universal Data Link, universelle Datenverknüpfung) zu speichern.</span><span class="sxs-lookup"><span data-stu-id="8199a-120">Avoid storing connection strings for an <xref:System.Data.OleDb.OleDbConnection> in a Universal Data Link (UDL) file.</span></span> <span data-ttu-id="8199a-121">Informationen in UDLs werden in Klartext gespeichert und können nicht verschlüsselt werden.</span><span class="sxs-lookup"><span data-stu-id="8199a-121">UDLs are stored in clear text and cannot be encrypted.</span></span> <span data-ttu-id="8199a-122">Bei einer UDL-Datei handelt es sich um eine externe dateibasierte Ressource der Anwendung, die mit .NET Framework nicht gesichert oder verschlüsselt werden kann.</span><span class="sxs-lookup"><span data-stu-id="8199a-122">A UDL file is an external file-based resource to your application, and it cannot be secured or encrypted using the .NET Framework.</span></span>  
  
## <a name="avoid-injection-attacks-with-connection-string-builders"></a><span data-ttu-id="8199a-123">Vermeiden von Einfügeangriffen mit Verbindungszeichenfolgen-Generatoren</span><span class="sxs-lookup"><span data-stu-id="8199a-123">Avoid Injection Attacks with Connection String Builders</span></span>  
 <span data-ttu-id="8199a-124">Zu einem Angriff durch Einschleusen von Verbindungszeichenfolgen kann es kommen, wenn die dynamische Zeichenfolgenverkettung verwendet wird, um auf Benutzereingabe basierende Verbindungszeichenfolgen zu konstruieren.</span><span class="sxs-lookup"><span data-stu-id="8199a-124">A connection string injection attack can occur when dynamic string concatenation is used to build connection strings based on user input.</span></span> <span data-ttu-id="8199a-125">Wenn die Benutzereingabe nicht validiert wird und schädlicher Text (oder schädliche Zeichen) nicht maskiert wird, kann ein Angreifer möglicherweise auf sicherheitsrelevante Daten oder andere Ressourcen auf dem Server zugreifen.</span><span class="sxs-lookup"><span data-stu-id="8199a-125">If the user input is not validated and malicious text or characters not escaped, an attacker can potentially access sensitive data or other resources on the server.</span></span> <span data-ttu-id="8199a-126">Zur Vermeidung dieses Problems enthält ADO.NET 2.0 neue Verbindungszeichenfolgen-Generatorklassen, mit deren Hilfe die Verbindungszeichenfolgensyntax validiert und sichergestellt werden kann, dass keine zusätzlichen Parameter eingeschleust werden.</span><span class="sxs-lookup"><span data-stu-id="8199a-126">To address this problem, ADO.NET 2.0 introduced new connection string builder classes to validate connection string syntax and ensure that additional parameters are not introduced.</span></span> <span data-ttu-id="8199a-127">Weitere Informationen finden Sie in [Connection String Builders (Verbindungszeichenfolgengeneratoren)](connection-string-builders.md).</span><span class="sxs-lookup"><span data-stu-id="8199a-127">For more information, see [Connection String Builders](connection-string-builders.md).</span></span>  
  
## <a name="use-persist-security-infofalse"></a><span data-ttu-id="8199a-128">Verwenden von "Persist Security Info=False"</span><span class="sxs-lookup"><span data-stu-id="8199a-128">Use Persist Security Info=False</span></span>  
 <span data-ttu-id="8199a-129">Die Standardeinstellung für `Persist Security Info` ist false. Wir empfehlen, diesen Standardwert in allen Verbindungszeichenfolgen beizubehalten.</span><span class="sxs-lookup"><span data-stu-id="8199a-129">The default value for `Persist Security Info` is false; we recommend using this default in all connection strings.</span></span> <span data-ttu-id="8199a-130">Wenn Sie `Persist Security Info` auf `true` oder `yes` festlegen, können sicherheitsrelevante Informationen, wie die Benutzer-ID und das Kennwort, über die Verbindung abgerufen werden, nachdem diese geöffnet wurde.</span><span class="sxs-lookup"><span data-stu-id="8199a-130">Setting `Persist Security Info` to `true` or `yes` allows security-sensitive information, including the user ID and password, to be obtained from a connection after it has been opened.</span></span> <span data-ttu-id="8199a-131">Wenn Sie `Persist Security Info` hingegen auf `false` oder `no` festlegen, werden die sicherheitsrelevanten Informationen verworfen, sobald die Verbindung mit ihrer Hilfe geöffnet wurde. Auf diese Weise wird dafür gesorgt, dass nicht vertrauenswürdige Quellen nicht auf sicherheitsrelevante Informationen zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="8199a-131">When `Persist Security Info` is set to `false` or `no`, security information is discarded after it is used to open the connection, ensuring that an untrusted source does not have access to security-sensitive information.</span></span>  
  
## <a name="encrypt-configuration-files"></a><span data-ttu-id="8199a-132">Verschlüsseln von Konfigurationsdateien</span><span class="sxs-lookup"><span data-stu-id="8199a-132">Encrypt Configuration Files</span></span>  
 <span data-ttu-id="8199a-133">Sie können die Verbindungszeichenfolgen auch in Konfigurationsdateien speichern. Damit erübrigt sich die Notwendigkeit, die Verbindungszeichenfolgen in den Code Ihrer Anwendung einzubetten.</span><span class="sxs-lookup"><span data-stu-id="8199a-133">You can also store connection strings in configuration files, which eliminates the need to embed them in your application's code.</span></span> <span data-ttu-id="8199a-134">Konfigurationsdateien sind Standard-XML-Dateien, für die .NET Framework einen allgemeinen Satz von Elementen definiert hat.</span><span class="sxs-lookup"><span data-stu-id="8199a-134">Configuration files are standard XML files for which the .NET Framework has defined a common set of elements.</span></span> <span data-ttu-id="8199a-135">Verbindungs Zeichenfolgen in Konfigurationsdateien werden in der Regel im- **\<connectionStrings>** Element in der **app. config** -Datei für eine Windows-Anwendung oder in der **Web. config** -Datei für eine ASP.NET-Anwendung gespeichert.</span><span class="sxs-lookup"><span data-stu-id="8199a-135">Connection strings in configuration files are typically stored inside the **\<connectionStrings>** element in the **app.config** for a Windows application, or the **web.config** file for an ASP.NET application.</span></span> <span data-ttu-id="8199a-136">Weitere Informationen zu den Grundlagen zum Speichern, abrufen und Verschlüsseln von Verbindungs Zeichenfolgen aus Konfigurationsdateien finden Sie unter Verbindungs Zeichenfolgen [und Konfigurationsdateien](connection-strings-and-configuration-files.md).</span><span class="sxs-lookup"><span data-stu-id="8199a-136">For more information on the basics of storing, retrieving and encrypting connection strings from configuration files, see [Connection Strings and Configuration Files](connection-strings-and-configuration-files.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8199a-137">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="8199a-137">See also</span></span>

- [<span data-ttu-id="8199a-138">Sichern von ADO.NET-Anwendungen</span><span class="sxs-lookup"><span data-stu-id="8199a-138">Securing ADO.NET Applications</span></span>](securing-ado-net-applications.md)
- <span data-ttu-id="8199a-139">[Verschlüsseln von Konfigurationsinformationen mithilfe der geschützten Konfiguration](https://docs.microsoft.com/previous-versions/aspnet/53tyfkaw(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="8199a-139">[Encrypting Configuration Information Using Protected Configuration](https://docs.microsoft.com/previous-versions/aspnet/53tyfkaw(v=vs.100))</span></span>
- [<span data-ttu-id="8199a-140">Sicherheit in .NET</span><span class="sxs-lookup"><span data-stu-id="8199a-140">Security in .NET</span></span>](../../../standard/security/index.md)
- [<span data-ttu-id="8199a-141">Übersicht über ADO.NET</span><span class="sxs-lookup"><span data-stu-id="8199a-141">ADO.NET Overview</span></span>](ado-net-overview.md)
