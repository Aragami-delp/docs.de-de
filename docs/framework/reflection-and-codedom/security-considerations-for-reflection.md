---
title: Sicherheitsüberlegungen für die Reflektion
ms.date: 03/30/2017
helpviewer_keywords:
- permissions [.NET Framework], reflection
- MethodInfo parameters
- reflection, security
- partial trust,reflection
- nonpublic members
- reflection,partial trust
- link demands
ms.assetid: 42d9dc2a-8fcc-4ff3-b002-4ff260ef3dc5
ms.openlocfilehash: 1bdaf3abd39797274236ace4cb2967d2e7d199b2
ms.sourcegitcommit: 62285ec11fa8e8424bab00511a90760c60e63c95
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 04/20/2020
ms.locfileid: "81644187"
---
# <a name="security-considerations-for-reflection"></a><span data-ttu-id="bcc64-102">Sicherheitsüberlegungen für die Reflektion</span><span class="sxs-lookup"><span data-stu-id="bcc64-102">Security Considerations for Reflection</span></span>

<span data-ttu-id="bcc64-103">Die Reflektion bietet die Möglichkeit, Typ- und Memberinformationen abzurufen und auf Member zuzugreifen (d. h. Aufrufen von Methoden und Konstruktoren, Abrufen und Festlegen von Eigenschaftswerten, Hinzufügen und Entfernen von Ereignishandlern usw.).</span><span class="sxs-lookup"><span data-stu-id="bcc64-103">Reflection provides the ability to obtain information about types and members, and to access members (that is, to call methods and constructors, to get and set property values, to add and remove event handlers, and so on).</span></span> <span data-ttu-id="bcc64-104">Die Verwendung von Reflektion, um Typ- und Memberinformationen abzurufen, ist nicht eingeschränkt.</span><span class="sxs-lookup"><span data-stu-id="bcc64-104">The use of reflection to obtain information about types and members is not restricted.</span></span> <span data-ttu-id="bcc64-105">Jeglicher Code kann Reflektion verwenden, um die folgenden Aufgaben auszuführen:</span><span class="sxs-lookup"><span data-stu-id="bcc64-105">All code can use reflection to perform the following tasks:</span></span>

- <span data-ttu-id="bcc64-106">Auflisten von Typen und Membern und Prüfen von deren Metadaten.</span><span class="sxs-lookup"><span data-stu-id="bcc64-106">Enumerate types and members, and examine their metadata.</span></span>

- <span data-ttu-id="bcc64-107">Auflisten und Prüfen von Assemblys und Modulen.</span><span class="sxs-lookup"><span data-stu-id="bcc64-107">Enumerate and examine assemblies and modules.</span></span>

<span data-ttu-id="bcc64-108">Das Verwenden von Reflektion, um auf Member zuzugreifen, ist dagegen Einschränkungen unterworfen.</span><span class="sxs-lookup"><span data-stu-id="bcc64-108">Using reflection to access members, by contrast, is subject to restrictions.</span></span> <span data-ttu-id="bcc64-109">Ab .NET Framework 4 kann nur vertrauenswürdiger Code Reflektion für den Zugriff auf sicherheitskritische Member verwenden.</span><span class="sxs-lookup"><span data-stu-id="bcc64-109">Beginning with the .NET Framework 4, only trusted code can use reflection to access security-critical members.</span></span> <span data-ttu-id="bcc64-110">Darüber hinaus kann nur vertrauenswürdiger Code Reflektion verwenden, um auf nicht öffentliche Member zuzugreifen, die in kompiliertem Code nicht direkt zugänglich sind.</span><span class="sxs-lookup"><span data-stu-id="bcc64-110">Furthermore, only trusted code can use reflection to access nonpublic members that would not be directly accessible to compiled code.</span></span> <span data-ttu-id="bcc64-111">Schließlich muss Code, der über Reflektion auf einen sicherheitskritischen Member zugreift, jegliche Berechtigungen haben, die der sicherheitskritische Member erfordert, genauso wie bei kompiliertem Code.</span><span class="sxs-lookup"><span data-stu-id="bcc64-111">Finally, code that uses reflection to access a safe-critical member must have whatever permissions the safe-critical member demands, just as with compiled code.</span></span>

<span data-ttu-id="bcc64-112">Sofern die notwendigen Berechtigungen vorliegen, kann Code mithilfe von Reflektion die folgenden Zugriffsarten ausführen:</span><span class="sxs-lookup"><span data-stu-id="bcc64-112">Subject to necessary permissions, code can use reflection to perform the following kinds of access:</span></span>

- <span data-ttu-id="bcc64-113">Zugreifen auf öffentliche Member, die nicht sicherheitskritisch sind.</span><span class="sxs-lookup"><span data-stu-id="bcc64-113">Access public members that are not security-critical.</span></span>

- <span data-ttu-id="bcc64-114">Zugreifen auf nicht öffentliche Member, auf die kompilierter Code zugreifen könnte, wenn diese Member nicht sicherheitskritisch sind.</span><span class="sxs-lookup"><span data-stu-id="bcc64-114">Access nonpublic members that would be accessible to compiled code, if those members are not security-critical.</span></span> <span data-ttu-id="bcc64-115">Beispiele für solche nicht öffentlichen Member:</span><span class="sxs-lookup"><span data-stu-id="bcc64-115">Examples of such nonpublic members include:</span></span>

  - <span data-ttu-id="bcc64-116">Geschützte Member der Basisklassen des aufrufenden Codes.</span><span class="sxs-lookup"><span data-stu-id="bcc64-116">Protected members of the calling code's base classes.</span></span> <span data-ttu-id="bcc64-117">(In Reflektion wird dies als Zugriff auf Familienebene bezeichnet.)</span><span class="sxs-lookup"><span data-stu-id="bcc64-117">(In reflection, this is referred to as family-level access.)</span></span>

  - <span data-ttu-id="bcc64-118">`internal`-Member (`Friend`-Member in Visual Basic) in der Assembly des aufrufenden Codes.</span><span class="sxs-lookup"><span data-stu-id="bcc64-118">`internal` members (`Friend` members in Visual Basic) in the calling code's assembly.</span></span> <span data-ttu-id="bcc64-119">(In Reflektion wird dies als Zugriff auf Assemblyebene bezeichnet.)</span><span class="sxs-lookup"><span data-stu-id="bcc64-119">(In reflection, this is referred to as assembly-level access.)</span></span>

  - <span data-ttu-id="bcc64-120">Private Member von anderen Instanzen der Klasse, die den aufrufenden Code enthält.</span><span class="sxs-lookup"><span data-stu-id="bcc64-120">Private members of other instances of the class that contains the calling code.</span></span>

<span data-ttu-id="bcc64-121">Zum Beispiel ist Code, der in einer Sandkastenanwendungsdomäne ausgeführt wird, auf den in dieser Liste beschriebenen Zugriff beschränkt, es sei denn, die Anwendungsdomäne gewährt zusätzliche Berechtigungen.</span><span class="sxs-lookup"><span data-stu-id="bcc64-121">For example, code that is run in a sandboxed application domain is limited to the access described in this list, unless the application domain grants additional permissions.</span></span>

<span data-ttu-id="bcc64-122">Ab .NET Framework 2.0 Service Pack 1 wird bei einem Zugriffsversuch auf Member, auf die normalerweise nicht zugegriffen werden kann, eine Anforderung nach dem Berechtigungssatz des Zielobjekts plus <xref:System.Security.Permissions.ReflectionPermission> mit dem <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType>-Flag erstellt.</span><span class="sxs-lookup"><span data-stu-id="bcc64-122">Starting with the .NET Framework 2.0 Service Pack 1, attempting to access members that are normally inaccessible generates a demand for the grant set of the target object plus <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> flag.</span></span> <span data-ttu-id="bcc64-123">Code, der mit voller Vertrauenswürdigkeit ausgeführt wird (z.B. Code in einer Anwendung, die über die Befehlszeile gestartet wird), kann diese Berechtigungen immer erfüllen.</span><span class="sxs-lookup"><span data-stu-id="bcc64-123">Code that is running with full trust (for example, code in an application that is launched from the command line) can always satisfy these permissions.</span></span> <span data-ttu-id="bcc64-124">(Dies unterliegt Einschränkungen beim Zugriff auf sicherheitskritische Member, wie dies in diesem Artikel weiter unten beschrieben ist.)</span><span class="sxs-lookup"><span data-stu-id="bcc64-124">(This is subject to limitations in accessing security-critical members, as described later in this article.)</span></span>

<span data-ttu-id="bcc64-125">Optional kann eine Sandkastenanwendungsdomäne <xref:System.Security.Permissions.ReflectionPermission> mit dem <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType>-Flag gewähren, wie dies weiter unten in diesem Artikel im Abschnitt [Zugreifen auf Member, auf die normalerweise nicht zugegriffen werden kann](#accessingNormallyInaccessible) beschrieben ist.</span><span class="sxs-lookup"><span data-stu-id="bcc64-125">Optionally, a sandboxed application domain can grant <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> flag, as described in the section [Accessing Members That Are Normally Inaccessible](#accessingNormallyInaccessible), later in this article.</span></span>

<a name="accessingSecurityCritical"></a>

## <a name="accessing-security-critical-members"></a><span data-ttu-id="bcc64-126">Zugreifen auf sicherheitskritische Member</span><span class="sxs-lookup"><span data-stu-id="bcc64-126">Accessing Security-Critical Members</span></span>

<span data-ttu-id="bcc64-127">Ein Member ist sicherheitskritisch, wenn er das <xref:System.Security.SecurityCriticalAttribute>, wenn er zu einem Typ gehört, der das <xref:System.Security.SecurityCriticalAttribute> hat, oder wenn er sich in einer sicherheitskritischen Assembly befindet.</span><span class="sxs-lookup"><span data-stu-id="bcc64-127">A member is security-critical if it has the <xref:System.Security.SecurityCriticalAttribute>, if it belongs to a type that has the <xref:System.Security.SecurityCriticalAttribute>, or if it is in a security-critical assembly.</span></span> <span data-ttu-id="bcc64-128">Ab .NET Framework 4 gelten folgende Regeln für den Zugriff auf sicherheitskritische Member:</span><span class="sxs-lookup"><span data-stu-id="bcc64-128">Beginning with the .NET Framework 4, the rules for accessing security-critical members are as follows:</span></span>

- <span data-ttu-id="bcc64-129">Transparenter Code kann nicht über Reflektion auf sicherheitskritische Member zugreifen, selbst wenn der Code vollständig vertrauenswürdig ist.</span><span class="sxs-lookup"><span data-stu-id="bcc64-129">Transparent code cannot use reflection to access security-critical members, even if the code is fully trusted.</span></span> <span data-ttu-id="bcc64-130">Es wird eine <xref:System.MethodAccessException>, <xref:System.FieldAccessException> oder <xref:System.TypeAccessException> ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="bcc64-130">A <xref:System.MethodAccessException>, <xref:System.FieldAccessException>, or <xref:System.TypeAccessException> is thrown.</span></span>

- <span data-ttu-id="bcc64-131">Code, der mit teilweiser Vertrauenswürdigkeit ausgeführt wird, wird als transparent behandelt.</span><span class="sxs-lookup"><span data-stu-id="bcc64-131">Code that is running with partial trust is treated as transparent.</span></span>

<span data-ttu-id="bcc64-132">Diese Regeln gelten immer, ganz gleich, ob auf einen sicherheitskritischen Member direkt aus kompiliertem Code oder über Reflektion zugegriffen wird.</span><span class="sxs-lookup"><span data-stu-id="bcc64-132">These rules are the same whether a security-critical member is accessed directly by compiled code, or accessed by using reflection.</span></span>

<span data-ttu-id="bcc64-133">Anwendungscode, der über die Befehlszeile ausgeführt wird, wird mit voller Vertrauenswürdigkeit ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="bcc64-133">Application code that is run from the command line runs with full trust.</span></span> <span data-ttu-id="bcc64-134">Solange Code nicht als transparent gekennzeichnet ist, kann er über Reflektion auf sicherheitskritische Member zugreifen.</span><span class="sxs-lookup"><span data-stu-id="bcc64-134">As long as it is not marked as transparent, it can use reflection to access security-critical members.</span></span> <span data-ttu-id="bcc64-135">Wenn der gleiche Code mit teilweiser Vertrauenswürdigkeit ausgeführt wird (z. B. in einer Sandkastenanwendungsdomäne), bestimmt die Vertrauensebene der Assembly, ob der Zugriff auf sicherheitskritischen Code gewährt wird: Wenn die Assembly über einen starken Namen verfügt und im globalen Assemblycache installiert ist, ist sie eine vertrauenswürdige Assembly und sie kann sicherheitskritische Member aufrufen.</span><span class="sxs-lookup"><span data-stu-id="bcc64-135">When the same code is run with partial trust (for example, in a sandboxed application domain) the assembly's trust level determines whether it can access security-critical code: If the assembly has a strong name and is installed in the global assembly cache, it is a trusted assembly and can call security-critical members.</span></span> <span data-ttu-id="bcc64-136">Ist die Assembly nicht vertrauenswürdig ist, wird sie transparent, obwohl sie nicht als transparent gekennzeichnet wurde, und sie kann nicht auf sicherheitskritische Member zugreifen.</span><span class="sxs-lookup"><span data-stu-id="bcc64-136">If it is not trusted, it becomes transparent even though it was not marked as transparent, and it cannot access security-critical members.</span></span>

<span data-ttu-id="bcc64-137">Weitere Informationen zum Sicherheitsmodell in .NET Framework 4 finden Sie unter [Änderungen der Sicherheit in .NET Framework](https://docs.microsoft.com/previous-versions/dotnet/framework/security/security-changes).</span><span class="sxs-lookup"><span data-stu-id="bcc64-137">For more information about the security model in the .NET Framework 4, see [Security Changes](https://docs.microsoft.com/previous-versions/dotnet/framework/security/security-changes).</span></span>

## <a name="reflection-and-transparency"></a><span data-ttu-id="bcc64-138">Reflektion und Transparenz</span><span class="sxs-lookup"><span data-stu-id="bcc64-138">Reflection and Transparency</span></span>

<span data-ttu-id="bcc64-139">Ab .NET Framework 4 bestimmt die Common Language Runtime (CLR) die Transparenzebene eines Typs oder Members auf der Grundlage mehrerer Faktoren (einschließlich der Vertrauensebene der Assembly und der Vertrauensebene der Anwendungsdomäne).</span><span class="sxs-lookup"><span data-stu-id="bcc64-139">Beginning with the .NET Framework 4, the common language runtime determines the transparency level of a type or member from several factors, including the trust level of the assembly and the trust level of the application domain.</span></span> <span data-ttu-id="bcc64-140">Reflektion stellt die Eigenschaften <xref:System.Type.IsSecurityCritical%2A>, <xref:System.Type.IsSecuritySafeCritical%2A> und <xref:System.Type.IsSecurityTransparent%2A> bereit, damit Sie die Transparenzebene eines Typs ermitteln können.</span><span class="sxs-lookup"><span data-stu-id="bcc64-140">Reflection provides the <xref:System.Type.IsSecurityCritical%2A>, <xref:System.Type.IsSecuritySafeCritical%2A>, and <xref:System.Type.IsSecurityTransparent%2A> properties to enable you to discover the transparency level of a type.</span></span> <span data-ttu-id="bcc64-141">Die folgende Tabelle enthält die gültigen Kombinationen dieser Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="bcc64-141">The following table shows the valid combinations of these properties.</span></span>

|<span data-ttu-id="bcc64-142">Sicherheitsstufe</span><span class="sxs-lookup"><span data-stu-id="bcc64-142">Security level</span></span>|<span data-ttu-id="bcc64-143">IsSecurityCritical</span><span class="sxs-lookup"><span data-stu-id="bcc64-143">IsSecurityCritical</span></span>|<span data-ttu-id="bcc64-144">IsSecuritySafeCritical</span><span class="sxs-lookup"><span data-stu-id="bcc64-144">IsSecuritySafeCritical</span></span>|<span data-ttu-id="bcc64-145">IsSecurityTransparent</span><span class="sxs-lookup"><span data-stu-id="bcc64-145">IsSecurityTransparent</span></span>|
|--------------------|------------------------|----------------------------|---------------------------|
|<span data-ttu-id="bcc64-146">Kritisch</span><span class="sxs-lookup"><span data-stu-id="bcc64-146">Critical</span></span>|`true`|`false`|`false`|
|<span data-ttu-id="bcc64-147">Sicherheitskritisch</span><span class="sxs-lookup"><span data-stu-id="bcc64-147">Safe-critical</span></span>|`true`|`true`|`false`|
|<span data-ttu-id="bcc64-148">Transparent</span><span class="sxs-lookup"><span data-stu-id="bcc64-148">Transparent</span></span>|`false`|`false`|`true`|

<span data-ttu-id="bcc64-149">Ein Verwenden dieser Eigenschaften ist deutlich einfacher als das Untersuchen der Sicherheitsanmerkungen einer Assembly und der zugehörigen Typen, das Überprüfen der aktuellen Vertrauensebene und das Versuchen, die Laufzeitregeln zu duplizieren.</span><span class="sxs-lookup"><span data-stu-id="bcc64-149">Using these properties is much simpler than examining the security annotations of an assembly and its types, checking the current trust level, and attempting to duplicate the runtime's rules.</span></span> <span data-ttu-id="bcc64-150">Derselbe Typ kann z. B. sicherheitskritisch sein, wenn er über die Befehlszeile ausgeführt wird, oder sicherheitstransparent, wenn er in einer Sandkastenanwendungsdomäne ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="bcc64-150">For example, the same type can be security-critical when it is run from the command line, or security-transparent when it is run in a sandboxed application domain.</span></span>

<span data-ttu-id="bcc64-151">Die Klassen <xref:System.Reflection.MethodBase>, <xref:System.Reflection.FieldInfo>, <xref:System.Reflection.Emit.TypeBuilder>, <xref:System.Reflection.Emit.MethodBuilder> und <xref:System.Reflection.Emit.DynamicMethod> haben ähnliche Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="bcc64-151">There are similar properties on the <xref:System.Reflection.MethodBase>, <xref:System.Reflection.FieldInfo>, <xref:System.Reflection.Emit.TypeBuilder>, <xref:System.Reflection.Emit.MethodBuilder>, and <xref:System.Reflection.Emit.DynamicMethod> classes.</span></span> <span data-ttu-id="bcc64-152">(Bei anderen Reflektionen und Abstraktionen für die Reflektionsausgabe werden Sicherheitsattribute auf die zugeordneten Methoden angewendet; bei Eigenschaften werden sie z. B. auf die Eigenschaftenaccessoren angewendet.)</span><span class="sxs-lookup"><span data-stu-id="bcc64-152">(For other reflection and reflection emit abstractions, security attributes are applied to the associated methods; for example, in the case of properties they are applied to the property accessors.)</span></span>

<a name="accessingNormallyInaccessible"></a>

## <a name="accessing-members-that-are-normally-inaccessible"></a><span data-ttu-id="bcc64-153">Zugreifen auf Member, auf die normalerweise nicht zugegriffen werden kann</span><span class="sxs-lookup"><span data-stu-id="bcc64-153">Accessing Members That Are Normally Inaccessible</span></span>

<span data-ttu-id="bcc64-154">Um über Reflektion Methoden aufzurufen, auf die nach den Zugriffsregeln der Common Language Runtime nicht zugegriffen kann, muss Ihrem Code eine von zwei Berechtigungen gewährt werden:</span><span class="sxs-lookup"><span data-stu-id="bcc64-154">To use reflection to invoke members that are inaccessible according to the accessibility rules of the common language runtime, your code must be granted one of two permissions:</span></span>

- <span data-ttu-id="bcc64-155">Damit Code einen beliebigen nicht öffentlichen Member aufrufen kann, muss dem Code <xref:System.Security.Permissions.ReflectionPermission> mit dem <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType>-Flag gewährt werden.</span><span class="sxs-lookup"><span data-stu-id="bcc64-155">To allow code to invoke any nonpublic member:Your code must be granted <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> flag.</span></span>

  > [!NOTE]
  > <span data-ttu-id="bcc64-156">Standardmäßig verweigert die Sicherheitsrichtlinie diese Berechtigung für Code, der aus dem Internet stammt.</span><span class="sxs-lookup"><span data-stu-id="bcc64-156">By default, security policy denies this permission to code that originates from the Internet.</span></span> <span data-ttu-id="bcc64-157">Diese Berechtigung sollte niemals für Code gewährt werden, der aus dem Internet stammt.</span><span class="sxs-lookup"><span data-stu-id="bcc64-157">This permission should never be granted to code that originates from the Internet.</span></span>

- <span data-ttu-id="bcc64-158">Damit Code beliebige nicht öffentliche Member aufrufen kann, sofern der Berechtigungssatz der Assembly, die den aufgerufenen Member enthält, mit dem Berechtigungssatz des aufrufenden Codes identisch oder eine Teilmenge dieses Berechtigungssatzes ist: Dem Code muss <xref:System.Security.Permissions.ReflectionPermission> mit dem <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType>-Flag gewährt werden.</span><span class="sxs-lookup"><span data-stu-id="bcc64-158">To allow code to invoke any nonpublic member, as long as the grant set of the assembly that contains the invoked member is the same as, or a subset of, the grant set of the assembly that contains the invoking code: Your code must be granted <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> flag.</span></span>

<span data-ttu-id="bcc64-159">Beispiel: Angenommen, Sie gewähren einer Anwendungsdomäne Internetberechtigungen plus <xref:System.Security.Permissions.ReflectionPermission> mit dem <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType>-Flag und führen anschließend eine Internetanwendung mit den beiden Assemblys A und B aus.</span><span class="sxs-lookup"><span data-stu-id="bcc64-159">For example, suppose you grant an application domain Internet permissions plus <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> flag, and then run an Internet application with two assemblies, A and B.</span></span>

- <span data-ttu-id="bcc64-160">Assembly A kann Reflektion verwenden, um auf private Member von Assembly B zuzugreifen, da der Berechtigungssatz der Assembly B keine Berechtigungen enthält, die A nicht gewährt wurden.</span><span class="sxs-lookup"><span data-stu-id="bcc64-160">Assembly A can use reflection to access private members of assembly B, because the grant set of assembly B does not include any permissions that A has not been granted.</span></span>

- <span data-ttu-id="bcc64-161">Assembly A kann Reflektion nicht verwenden, um auf private Member von .NET Framework-Assemblys wie „mscorlib.dll“ zuzugreifen, denn „mscorlib.dll“ ist voll vertrauenswürdig und hat daher Berechtigungen, die Assembly A nicht gewährt wurden. Eine <xref:System.MemberAccessException> wird ausgelöst, wenn die Codezugriffssicherheit die Stapel zur Laufzeit durchläuft.</span><span class="sxs-lookup"><span data-stu-id="bcc64-161">Assembly A cannot use reflection to access private members of .NET Framework assemblies such as mscorlib.dll, because mscorlib.dll is fully trusted and therefore has permissions that have not been granted to assembly A. A <xref:System.MemberAccessException> is thrown when code access security walks the stack at run time.</span></span>

## <a name="serialization"></a><span data-ttu-id="bcc64-162">Serialisierung</span><span class="sxs-lookup"><span data-stu-id="bcc64-162">Serialization</span></span>

<span data-ttu-id="bcc64-163">Für Serialisierung bietet <xref:System.Security.Permissions.SecurityPermission> mit dem <xref:System.Security.Permissions.SecurityPermissionAttribute.SerializationFormatter%2A?displayProperty=nameWithType>-Flag die Möglichkeit, Member von serialisierbaren Typen unabhängig davon, ob grundsätzlich auf sie zugegriffen werden kann, abzurufen und festzulegen.</span><span class="sxs-lookup"><span data-stu-id="bcc64-163">For serialization, <xref:System.Security.Permissions.SecurityPermission> with the <xref:System.Security.Permissions.SecurityPermissionAttribute.SerializationFormatter%2A?displayProperty=nameWithType> flag provides the ability to get and set members of serializable types, regardless of accessibility.</span></span> <span data-ttu-id="bcc64-164">Mit dieser Berechtigung kann Code den privaten Status einer Instanz erkennen und ändern.</span><span class="sxs-lookup"><span data-stu-id="bcc64-164">This permission enables code to discover and change the private state of an instance.</span></span> <span data-ttu-id="bcc64-165">(Zusätzlich dazu, dass dem Typ die entsprechenden Berechtigungen gewährt werden, muss er in den Metadaten als serialisierbar [markiert](../../standard/attributes/applying-attributes.md) sein.)</span><span class="sxs-lookup"><span data-stu-id="bcc64-165">(In addition to being granted the appropriate permissions, the type must be [marked](../../standard/attributes/applying-attributes.md) as serializable in metadata.)</span></span>

## <a name="parameters-of-type-methodinfo"></a><span data-ttu-id="bcc64-166">Parameter des MethodInfo-Typs</span><span class="sxs-lookup"><span data-stu-id="bcc64-166">Parameters of Type MethodInfo</span></span>

<span data-ttu-id="bcc64-167">Sie sollten keine öffentlichen Member schreiben, an die <xref:System.Reflection.MethodInfo>-Parameter übergeben werden. Dies gilt insbesondere für vertrauenswürdigen Code.</span><span class="sxs-lookup"><span data-stu-id="bcc64-167">Avoid writing public members that take <xref:System.Reflection.MethodInfo> parameters, especially for trusted code.</span></span> <span data-ttu-id="bcc64-168">Solche Member sind möglicherweise anfälliger für Schadsoftware.</span><span class="sxs-lookup"><span data-stu-id="bcc64-168">Such members might be more vulnerable to malicious code.</span></span> <span data-ttu-id="bcc64-169">Nehmen Sie z. B. an, es gibt einen öffentlichen Member in hoch vertrauenswürdigem Code, und diesem Member wird ein <xref:System.Reflection.MethodInfo>-Parameter übergeben.</span><span class="sxs-lookup"><span data-stu-id="bcc64-169">For example, consider a public member in highly trusted code that takes a <xref:System.Reflection.MethodInfo> parameter.</span></span> <span data-ttu-id="bcc64-170">Nehmen Sie weiter an, der öffentliche Member ruft indirekt die <xref:System.Reflection.MethodBase.Invoke%2A>-Methode für den bereitgestellten Parameter auf.</span><span class="sxs-lookup"><span data-stu-id="bcc64-170">Assume that the public member indirectly calls the <xref:System.Reflection.MethodBase.Invoke%2A> method on the supplied parameter.</span></span> <span data-ttu-id="bcc64-171">Wenn der öffentliche Member nicht die erforderlichen Berechtigungsprüfungen ausführt, ist ein Aufruf <xref:System.Reflection.MethodBase.Invoke%2A>-Methode in jedem erfolgreich, weil das Sicherheitssystem feststellt, dass der Aufrufer hoch vertrauenswürdig ist.</span><span class="sxs-lookup"><span data-stu-id="bcc64-171">If the public member does not perform the necessary permission checks, the call to the <xref:System.Reflection.MethodBase.Invoke%2A> method will always succeed, because the security system determines that the caller is highly trusted.</span></span> <span data-ttu-id="bcc64-172">Selbst wenn Schadsoftware nicht die Berechtigung hat, die Methode direkt aufzurufen, kann sie dies weiterhin indirekt durch Aufrufen des öffentlichen Members tun.</span><span class="sxs-lookup"><span data-stu-id="bcc64-172">Even if malicious code does not have the permission to directly invoke the method, it can still do so indirectly by calling the public member.</span></span>

## <a name="version-information"></a><span data-ttu-id="bcc64-173">Versionsinformationen</span><span class="sxs-lookup"><span data-stu-id="bcc64-173">Version Information</span></span>

- <span data-ttu-id="bcc64-174">Ab .NET Framework 4 kann transparenter Code Reflektion nicht für den Zugriff auf sicherheitskritische Member verwenden.</span><span class="sxs-lookup"><span data-stu-id="bcc64-174">Beginning with the .NET Framework 4, transparent code cannot use reflection to access security-critical members.</span></span>

- <span data-ttu-id="bcc64-175">Das <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType>-Flag wurde in .NET Framework 2.0 Service Pack 1 eingeführt.</span><span class="sxs-lookup"><span data-stu-id="bcc64-175">The <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> flag is introduced in the .NET Framework 2.0 Service Pack 1.</span></span> <span data-ttu-id="bcc64-176">Frühere Versionen von .NET Framework erfordern das <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType>-Flag für Code, in dem Reflektion verwendet wird, um auf nicht öffentliche Member zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="bcc64-176">Earlier versions of the .NET Framework require the <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> flag for code that uses reflection to access nonpublic members.</span></span> <span data-ttu-id="bcc64-177">Diese Berechtigung sollte in keinem Fall teilweise vertrauenswürdigem Code erteilt werden.</span><span class="sxs-lookup"><span data-stu-id="bcc64-177">This is a permission that should never be granted to partially trusted code.</span></span>

- <span data-ttu-id="bcc64-178">Ab .NET Framework 2.0 sind keine Berechtigungen erforderlich, um über Reflektion Informationen über nicht öffentliche Typen und Member abzurufen.</span><span class="sxs-lookup"><span data-stu-id="bcc64-178">Beginning with the .NET Framework 2.0, using reflection to obtain information about nonpublic types and members does not require any permissions.</span></span> <span data-ttu-id="bcc64-179">In früheren Versionen ist <xref:System.Security.Permissions.ReflectionPermission> mit dem <xref:System.Security.Permissions.ReflectionPermissionFlag.TypeInformation?displayProperty=nameWithType>-Flag erforderlich.</span><span class="sxs-lookup"><span data-stu-id="bcc64-179">In earlier versions, <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.TypeInformation?displayProperty=nameWithType> flag is required.</span></span>

## <a name="see-also"></a><span data-ttu-id="bcc64-180">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="bcc64-180">See also</span></span>

- <xref:System.Security.Permissions.ReflectionPermissionFlag>
- <xref:System.Security.Permissions.ReflectionPermission>
- <xref:System.Security.Permissions.SecurityPermission>
- [<span data-ttu-id="bcc64-181">Sicherheitsänderungen</span><span class="sxs-lookup"><span data-stu-id="bcc64-181">Security Changes</span></span>](https://docs.microsoft.com/previous-versions/dotnet/framework/security/security-changes)
- [<span data-ttu-id="bcc64-182">Codezugriffssicherheit</span><span class="sxs-lookup"><span data-stu-id="bcc64-182">Code Access Security</span></span>](../misc/code-access-security.md)
- [<span data-ttu-id="bcc64-183">Sicherheitsaspekte bei der Reflektionsausgabe</span><span class="sxs-lookup"><span data-stu-id="bcc64-183">Security Issues in Reflection Emit</span></span>](security-issues-in-reflection-emit.md)
- [<span data-ttu-id="bcc64-184">Anzeigen von Typinformationen</span><span class="sxs-lookup"><span data-stu-id="bcc64-184">Viewing Type Information</span></span>](viewing-type-information.md)
- [<span data-ttu-id="bcc64-185">Anwenden von Attributen</span><span class="sxs-lookup"><span data-stu-id="bcc64-185">Applying Attributes</span></span>](../../standard/attributes/applying-attributes.md)
- [<span data-ttu-id="bcc64-186">Zugreifen auf benutzerdefinierte Attribute</span><span class="sxs-lookup"><span data-stu-id="bcc64-186">Accessing Custom Attributes</span></span>](accessing-custom-attributes.md)
