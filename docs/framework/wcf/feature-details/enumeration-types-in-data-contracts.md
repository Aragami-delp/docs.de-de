---
title: Enumerationstypen in Datenverträgen
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- data contracts [WCF], enumeration types
ms.assetid: b5d694da-68cb-4b74-a5fb-75108a68ec3b
ms.openlocfilehash: 86fa38b281d8944797fa858f8c67f0b60c733be8
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/09/2020
ms.locfileid: "84595543"
---
# <a name="enumeration-types-in-data-contracts"></a><span data-ttu-id="d5eac-102">Enumerationstypen in Datenverträgen</span><span class="sxs-lookup"><span data-stu-id="d5eac-102">Enumeration Types in Data Contracts</span></span>
<span data-ttu-id="d5eac-103">Enumerationen können im Datenvertragsmodell ausgedrückt werden.</span><span class="sxs-lookup"><span data-stu-id="d5eac-103">Enumerations can be expressed in the data contract model.</span></span> <span data-ttu-id="d5eac-104">In diesem Thema werden mehrere Beispiele behandelt, in denen das Programmiermodell erklärt wird.</span><span class="sxs-lookup"><span data-stu-id="d5eac-104">This topic walks through several examples that explain the programming model.</span></span>  
  
## <a name="enumeration-basics"></a><span data-ttu-id="d5eac-105">Grundlagen der Enumeration</span><span class="sxs-lookup"><span data-stu-id="d5eac-105">Enumeration Basics</span></span>  
 <span data-ttu-id="d5eac-106">Eine Möglichkeit, Enumerationstypen im Datenvertragmodell zu verwenden, besteht darin, das <xref:System.Runtime.Serialization.DataContractAttribute>-Attribut auf den Typ anzuwenden.</span><span class="sxs-lookup"><span data-stu-id="d5eac-106">One way to use enumeration types in the data contract model is to apply the <xref:System.Runtime.Serialization.DataContractAttribute> attribute to the type.</span></span> <span data-ttu-id="d5eac-107">Anschließend müssen Sie das <xref:System.Runtime.Serialization.EnumMemberAttribute>-Attribut auf jeden Member anwenden, der im Datenvertrag enthalten sein soll.</span><span class="sxs-lookup"><span data-stu-id="d5eac-107">You must then apply the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute to each member that must be included in the data contract.</span></span>  
  
 <span data-ttu-id="d5eac-108">Das folgende Beispiel zeigt zwei Klassen.</span><span class="sxs-lookup"><span data-stu-id="d5eac-108">The following example shows two classes.</span></span> <span data-ttu-id="d5eac-109">Die erste Klasse verwendet die Enumeration, und die zweite Klasse definiert die Enumeration.</span><span class="sxs-lookup"><span data-stu-id="d5eac-109">The first uses the enumeration and the second defines the enumeration.</span></span>  
  
 [!code-csharp[c_DataContractEnumerations#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontractenumerations/cs/source.cs#1)]
 [!code-vb[c_DataContractEnumerations#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontractenumerations/vb/source.vb#1)]  
  
 <span data-ttu-id="d5eac-110">Sie können eine Instanz der `Car`-Klasse nur senden oder empfangen, wenn das Feld `condition` auf einen der folgenden Werte festgelegt ist: `New`, `Used` oder `Rental`.</span><span class="sxs-lookup"><span data-stu-id="d5eac-110">An instance of the `Car` class can be sent or received only if the `condition` field is set to one of the values `New`, `Used`, or `Rental`.</span></span> <span data-ttu-id="d5eac-111">Wenn `condition` den Wert `Broken` oder `Stolen` hat, wird eine <xref:System.Runtime.Serialization.SerializationException> ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="d5eac-111">If the `condition` is `Broken` or `Stolen`, a <xref:System.Runtime.Serialization.SerializationException> is thrown.</span></span>  
  
 <span data-ttu-id="d5eac-112">Sie können die <xref:System.Runtime.Serialization.DataContractAttribute>-Eigenschaften (<xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> und <xref:System.Runtime.Serialization.DataContractAttribute.Namespace%2A>) wie gewohnt für Enumerationsdatenverträge verwenden.</span><span class="sxs-lookup"><span data-stu-id="d5eac-112">You can use the <xref:System.Runtime.Serialization.DataContractAttribute> properties (<xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> and <xref:System.Runtime.Serialization.DataContractAttribute.Namespace%2A>) as usual for enumeration data contracts.</span></span>  
  
### <a name="enumeration-member-values"></a><span data-ttu-id="d5eac-113">Enumerationsmemberwerte</span><span class="sxs-lookup"><span data-stu-id="d5eac-113">Enumeration Member Values</span></span>  
 <span data-ttu-id="d5eac-114">Im Allgemeinen enthält der Datenvertrag Enumerationsmembernamen, keine numerischen Werte.</span><span class="sxs-lookup"><span data-stu-id="d5eac-114">Generally the data contract includes enumeration member names, not numerical values.</span></span> <span data-ttu-id="d5eac-115">Wenn jedoch das Daten Vertragsmodell verwendet wird, wenn es sich bei der Empfangsseite um einen WCF-Client handelt, werden die numerischen Werte vom exportierten Schema beibehalten.</span><span class="sxs-lookup"><span data-stu-id="d5eac-115">However, when using the data contract model, if the receiving side is a WCF client, the exported schema preserves the numerical values.</span></span> <span data-ttu-id="d5eac-116">Beachten Sie, dass dies nicht der Fall ist, wenn mit der [XmlSerializer-Klasse](using-the-xmlserializer-class.md)verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d5eac-116">Note that this is not the case when using the [Using the XmlSerializer Class](using-the-xmlserializer-class.md).</span></span>  
  
 <span data-ttu-id="d5eac-117">Wenn im obigen Beispiel `condition` auf `Used` festgelegt ist und die Daten in XML serialisiert werden, lautet das XML-Ergebnis `<condition>Used</condition>``<condition>1</condition>`, und nicht .</span><span class="sxs-lookup"><span data-stu-id="d5eac-117">In the preceding example, if `condition` is set to `Used` and the data is serialized to XML, the resulting XML is `<condition>Used</condition>` and not `<condition>1</condition>`.</span></span> <span data-ttu-id="d5eac-118">Deshalb entspricht der folgende Datenvertrag dem Datenvertrag von `CarConditionEnum`.</span><span class="sxs-lookup"><span data-stu-id="d5eac-118">Therefore, the following data contract is equivalent to the data contract of `CarConditionEnum`.</span></span>  
  
 [!code-csharp[c_DataContractEnumerations#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontractenumerations/cs/source.cs#2)]
 [!code-vb[c_DataContractEnumerations#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontractenumerations/vb/source.vb#2)]  
  
 <span data-ttu-id="d5eac-119">Sie können beispielsweise `CarConditionEnum` auf der Absenderseite und `CarConditionWithNumbers` auf der Empfängerseite verwenden.</span><span class="sxs-lookup"><span data-stu-id="d5eac-119">For example, you can use `CarConditionEnum` on the sending side and `CarConditionWithNumbers` on the receiving side.</span></span> <span data-ttu-id="d5eac-120">Obwohl die Absenderseite den Wert 1 und die Empfängerseite den Wert 20 für `Used` verwendet, lautet die XML-Darstellung für beide Seiten `<condition>Used</condition>`.</span><span class="sxs-lookup"><span data-stu-id="d5eac-120">Although the sending side uses the value "1" for `Used` and the receiving side uses the value "20," the XML representation is `<condition>Used</condition>` for both sides.</span></span>  
  
 <span data-ttu-id="d5eac-121">Um das Einbinden in den Datenvertrag zu erreichen, müssen Sie das <xref:System.Runtime.Serialization.EnumMemberAttribute>-Attribut anwenden.</span><span class="sxs-lookup"><span data-stu-id="d5eac-121">To be included in the data contract, you must apply the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute.</span></span> <span data-ttu-id="d5eac-122">In der .NET Framework können Sie immer den besonderen Wert 0 (null) auf eine Enumeration anwenden, bei der es sich auch um den Standardwert für eine beliebige Enumeration handelt.</span><span class="sxs-lookup"><span data-stu-id="d5eac-122">In the .NET Framework, you can always apply the special value 0 (zero) to an enumeration, which is also the default value for any enumeration.</span></span> <span data-ttu-id="d5eac-123">Auch dieser Sonderwert 0 kann jedoch nur serialisiert werden, wenn er mithilfe des <xref:System.Runtime.Serialization.EnumMemberAttribute>-Attributs gekennzeichnet ist.</span><span class="sxs-lookup"><span data-stu-id="d5eac-123">However, even this special zero value cannot be serialized unless it is marked with the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute.</span></span>  
  
 <span data-ttu-id="d5eac-124">Dabei gelten zwei Ausnahmen:</span><span class="sxs-lookup"><span data-stu-id="d5eac-124">There are two exceptions to this:</span></span>  
  
- <span data-ttu-id="d5eac-125">Flagenumerationen (weiter unten in diesem Thema beschrieben).</span><span class="sxs-lookup"><span data-stu-id="d5eac-125">Flag enumerations (discussed later in this topic).</span></span>  
  
- <span data-ttu-id="d5eac-126">Enumerationsdatenmember, für die die <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A>-Eigenschaft auf `false` festgelegt ist. (In diesem Fall wird die Enumeration mit dem Wert "0" einfach aus den serialisierten Daten weggelassen.)</span><span class="sxs-lookup"><span data-stu-id="d5eac-126">Enumeration data members with the <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> property set to `false` (in which case, the enumeration with the value zero is omitted from the serialized data).</span></span>  
  
### <a name="customizing-enumeration-member-values"></a><span data-ttu-id="d5eac-127">Anpassen von Enumerationsmemberwerten</span><span class="sxs-lookup"><span data-stu-id="d5eac-127">Customizing Enumeration Member Values</span></span>  
 <span data-ttu-id="d5eac-128">Sie können den Enumerationsmemberwert anpassen, der Teil des Datenvertrags ist, indem Sie die <xref:System.Runtime.Serialization.EnumMemberAttribute.Value%2A>-Eigenschaft des <xref:System.Runtime.Serialization.EnumMemberAttribute>-Attributs verwenden.</span><span class="sxs-lookup"><span data-stu-id="d5eac-128">You can customize the enumeration member value that forms a part of the data contract by using the <xref:System.Runtime.Serialization.EnumMemberAttribute.Value%2A> property of the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute.</span></span>  
  
 <span data-ttu-id="d5eac-129">Der folgende Datenvertrag entspricht auch dem Datenvertrag von `CarConditionEnum`.</span><span class="sxs-lookup"><span data-stu-id="d5eac-129">For example, the following data contract is also equivalent to the data contract of the `CarConditionEnum`.</span></span>  
  
 [!code-csharp[c_DataContractEnumerations#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontractenumerations/cs/source.cs#3)]
 [!code-vb[c_DataContractEnumerations#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontractenumerations/vb/source.vb#3)]  
  
 <span data-ttu-id="d5eac-130">Nach der Serialisierung weist der Wert von `PreviouslyOwned` die XML-Darstellung `<condition>Used</condition>` auf.</span><span class="sxs-lookup"><span data-stu-id="d5eac-130">When serialized, the value of `PreviouslyOwned` has the XML representation `<condition>Used</condition>`.</span></span>  
  
## <a name="simple-enumerations"></a><span data-ttu-id="d5eac-131">Einfache Enumerationen</span><span class="sxs-lookup"><span data-stu-id="d5eac-131">Simple Enumerations</span></span>  
 <span data-ttu-id="d5eac-132">Sie können auch Enumerationstypen serialisieren, auf die das <xref:System.Runtime.Serialization.DataContractAttribute>-Attribut nicht angewendet wurde.</span><span class="sxs-lookup"><span data-stu-id="d5eac-132">You can also serialize enumeration types to which the <xref:System.Runtime.Serialization.DataContractAttribute> attribute has not been applied.</span></span> <span data-ttu-id="d5eac-133">Enumerationstypen dieser Art werden exakt wie zuvor beschrieben behandelt. Es gilt jedoch die Ausnahme, dass jeder Member (auf den das <xref:System.NonSerializedAttribute>-Attribut nicht angewendet wurde) so behandelt wird, als ob das <xref:System.Runtime.Serialization.EnumMemberAttribute>-Attribut angewendet wurde.</span><span class="sxs-lookup"><span data-stu-id="d5eac-133">Such enumeration types are treated exactly as previously described, except that every member (that does not have the <xref:System.NonSerializedAttribute> attribute applied) is treated as if the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute has been applied.</span></span> <span data-ttu-id="d5eac-134">Zum Beispiel verfügt die folgende Enumeration implizit über einen Datenvertrag, der dem Datenvertrag im vorherigen `CarConditionEnum`-Beispiel entspricht.</span><span class="sxs-lookup"><span data-stu-id="d5eac-134">For example, the following enumeration implicitly has a data contract equivalent to the preceding `CarConditionEnum` example.</span></span>  
  
 [!code-csharp[c_DataContractEnumerations#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontractenumerations/cs/source.cs#6)]
 [!code-vb[c_DataContractEnumerations#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontractenumerations/vb/source.vb#6)]  
  
 <span data-ttu-id="d5eac-135">Sie können einfache Enumerationen verwenden, wenn es nicht erforderlich ist, den Datenvertragsnamen und den Namespace der Enumeration und die Enumerationsmemberwerte anzupassen.</span><span class="sxs-lookup"><span data-stu-id="d5eac-135">You can use simple enumerations when you do not need to customize the enumeration's data contract name and namespace and the enumeration member values.</span></span>  
  
#### <a name="notes-on-simple-enumerations"></a><span data-ttu-id="d5eac-136">Hinweise zu einfachen Enumerationen</span><span class="sxs-lookup"><span data-stu-id="d5eac-136">Notes on Simple Enumerations</span></span>  
 <span data-ttu-id="d5eac-137">Wenn Sie das <xref:System.Runtime.Serialization.EnumMemberAttribute>-Attribut auf einfache Enumerationen anwenden, hat dies keine Auswirkung.</span><span class="sxs-lookup"><span data-stu-id="d5eac-137">Applying the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute to simple enumerations has no effect.</span></span>  
  
 <span data-ttu-id="d5eac-138">Es ist unerheblich, ob Sie das <xref:System.SerializableAttribute>-Attribut auf die Enumeration anwenden.</span><span class="sxs-lookup"><span data-stu-id="d5eac-138">It makes no difference whether or not the <xref:System.SerializableAttribute> attribute is applied to the enumeration.</span></span>  
  
 <span data-ttu-id="d5eac-139">Die Tatsache, dass die <xref:System.Runtime.Serialization.DataContractSerializer>-Klasse das <xref:System.NonSerializedAttribute>-Attribut berücksichtigt, das auf Enumerationsmember angewendet wird, gilt nicht für das Verhalten von <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> und <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter>.</span><span class="sxs-lookup"><span data-stu-id="d5eac-139">The fact that the <xref:System.Runtime.Serialization.DataContractSerializer> class honors the <xref:System.NonSerializedAttribute> attribute applied to enumeration members is different from the behavior of the <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> and the <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter>.</span></span> <span data-ttu-id="d5eac-140">Beide Serialisierungsprogramme ignorieren das <xref:System.NonSerializedAttribute>-Attribut.</span><span class="sxs-lookup"><span data-stu-id="d5eac-140">Both of those serializers ignore the <xref:System.NonSerializedAttribute> attribute.</span></span>  
  
## <a name="flag-enumerations"></a><span data-ttu-id="d5eac-141">Flagenumerationen</span><span class="sxs-lookup"><span data-stu-id="d5eac-141">Flag Enumerations</span></span>  
 <span data-ttu-id="d5eac-142">Sie können das <xref:System.FlagsAttribute>-Attribut auf Enumerationen anwenden.</span><span class="sxs-lookup"><span data-stu-id="d5eac-142">You can apply the <xref:System.FlagsAttribute> attribute to enumerations.</span></span> <span data-ttu-id="d5eac-143">In diesem Fall kann eine Liste von null oder mehr Enumerationswerten gleichzeitig gesendet oder empfangen werden.</span><span class="sxs-lookup"><span data-stu-id="d5eac-143">In that case, a list of zero or more enumeration values can be sent or received simultaneously.</span></span>  
  
 <span data-ttu-id="d5eac-144">Wenden Sie dazu das <xref:System.Runtime.Serialization.DataContractAttribute>-Attribut auf die Flagenumeration an, und markieren Sie dann alle Member, die Potenzen von 2 sind, mit dem <xref:System.Runtime.Serialization.EnumMemberAttribute>-Attribut.</span><span class="sxs-lookup"><span data-stu-id="d5eac-144">To do so, apply the <xref:System.Runtime.Serialization.DataContractAttribute> attribute to the flag enumeration and then mark all the members that are powers of two with the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute.</span></span> <span data-ttu-id="d5eac-145">Beachten Sie, dass es sich bei der Progression um eine ununterbrochene Folge mit Potenzen des Werts 2 handeln muss (beispielsweise 1, 2, 4, 8, 16, 32, 64).</span><span class="sxs-lookup"><span data-stu-id="d5eac-145">Note that to use a flag enumeration, the progression must be an uninterrupted sequence of powers of 2 (for example, 1, 2, 4, 8, 16, 32, 64).</span></span>  
  
 <span data-ttu-id="d5eac-146">Die folgenden Schritte gelten für das Senden des Enumerationswerts eines Flags:</span><span class="sxs-lookup"><span data-stu-id="d5eac-146">The following steps apply to sending a flag's enumeration value:</span></span>  
  
1. <span data-ttu-id="d5eac-147">Versuchen Sie, einen Enumerationsmember zu finden (mit angewendetem <xref:System.Runtime.Serialization.EnumMemberAttribute>-Attribut), der dem numerischen Wert zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="d5eac-147">Attempt to find an enumeration member (with the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute applied) that maps to the numeric value.</span></span> <span data-ttu-id="d5eac-148">Wenn Sie einen Member finden, senden Sie eine Liste, die nur diesen Member enthält.</span><span class="sxs-lookup"><span data-stu-id="d5eac-148">If found, send a list that contains just that member.</span></span>  
  
2. <span data-ttu-id="d5eac-149">Versuchen Sie, den numerischen Wert so zu einer Summe aufzulösen, dass Enumerationsmember vorhanden sind (jeweils mit angewendetem <xref:System.Runtime.Serialization.EnumMemberAttribute>-Attribut), die den einzelnen Teilen der Summe zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="d5eac-149">Attempt to break the numeric value into a sum such that there are enumeration members (each with the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute applied) that map to each part of the sum.</span></span> <span data-ttu-id="d5eac-150">Senden Sie die Liste mit allen Membern dieser Art.</span><span class="sxs-lookup"><span data-stu-id="d5eac-150">Send the list of all these members.</span></span> <span data-ttu-id="d5eac-151">Beachten Sie, dass der *gierige Algorithmus* verwendet wird, um eine solche Summe zu finden. Daher besteht keine Garantie dafür, dass eine solche Summe gefunden wird, auch wenn Sie vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="d5eac-151">Note that the *greedy algorithm* is used to find such a sum, and thus there is no guarantee that such a sum is found even if it is present.</span></span> <span data-ttu-id="d5eac-152">Um dieses Problem zu verhindern, sollten Sie sicherstellen, dass es sich bei den numerischen Werten der Enumerationsmember um Potenzen von 2 handelt.</span><span class="sxs-lookup"><span data-stu-id="d5eac-152">To avoid this problem, make sure that the numeric values of the enumeration members are powers of two.</span></span>  
  
3. <span data-ttu-id="d5eac-153">Lösen Sie eine <xref:System.Runtime.Serialization.SerializationException> aus, wenn die vorausgehenden zwei Schritte fehlschlagen und der numerische Wert ungleich 0 ist.</span><span class="sxs-lookup"><span data-stu-id="d5eac-153">If the preceding two steps fail, and the numeric value is nonzero, throw a <xref:System.Runtime.Serialization.SerializationException>.</span></span> <span data-ttu-id="d5eac-154">Senden Sie die leere Liste, wenn der numerische Wert 0 ist.</span><span class="sxs-lookup"><span data-stu-id="d5eac-154">If the numeric value is zero, send the empty list.</span></span>  
  
### <a name="example"></a><span data-ttu-id="d5eac-155">Beispiel</span><span class="sxs-lookup"><span data-stu-id="d5eac-155">Example</span></span>  
 <span data-ttu-id="d5eac-156">Das folgende Enumerationsbeispiel kann für einen Flagvorgang verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="d5eac-156">The following enumeration example can be used in a flag operation.</span></span>  
  
 [!code-csharp[c_DataContractEnumerations#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontractenumerations/cs/source.cs#4)]
 [!code-vb[c_DataContractEnumerations#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontractenumerations/vb/source.vb#4)]  
  
 <span data-ttu-id="d5eac-157">Die folgenden Beispielwerte werden dabei wie angegeben serialisiert.</span><span class="sxs-lookup"><span data-stu-id="d5eac-157">The following example values are serialized as indicated.</span></span>  
  
 [!code-csharp[c_DataContractEnumerations#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontractenumerations/cs/source.cs#5)]
 [!code-vb[c_DataContractEnumerations#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontractenumerations/vb/source.vb#5)]  
  
## <a name="see-also"></a><span data-ttu-id="d5eac-158">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="d5eac-158">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractSerializer>
- [<span data-ttu-id="d5eac-159">Verwenden von Datenverträgen</span><span class="sxs-lookup"><span data-stu-id="d5eac-159">Using Data Contracts</span></span>](using-data-contracts.md)
- [<span data-ttu-id="d5eac-160">Angeben von Datenübertragung in Dienstverträgen</span><span class="sxs-lookup"><span data-stu-id="d5eac-160">Specifying Data Transfer in Service Contracts</span></span>](specifying-data-transfer-in-service-contracts.md)
