---
title: Benutzerdefinierte Abhängigkeitseigenschaften
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- implementing [WPF], wrappers
- registering properties [WPF]
- properties [WPF], metadata
- metadata [WPF], for properties
- custom dependency properties [WPF]
- properties [WPF], registering
- wrappers [WPF], implementing
- dependency properties [WPF], custom
ms.assetid: e6bfcfac-b10d-4f58-9f77-a864c2a2938f
ms.openlocfilehash: e4117d7add2a34d6d989d9222e7688361cf6b379
ms.sourcegitcommit: 62285ec11fa8e8424bab00511a90760c60e63c95
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/20/2020
ms.locfileid: "81646358"
---
# <a name="custom-dependency-properties"></a><span data-ttu-id="4cf23-102">Benutzerdefinierte Abhängigkeitseigenschaften</span><span class="sxs-lookup"><span data-stu-id="4cf23-102">Custom Dependency Properties</span></span>

<span data-ttu-id="4cf23-103">Dieses Thema beschreibt die Gründe, warum Anwendungsentwickler und Komponentenautoren in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] benutzerdefinierte Abhängigkeitseigenschaften erstellen möchten, und beschreibt die Implementierungsmaßnahmen und -optionen, die die Leistung, Verwendbarkeit oder Vielseitigkeit der Eigenschaft verbessern können.</span><span class="sxs-lookup"><span data-stu-id="4cf23-103">This topic describes the reasons that [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] application developers and component authors might want to create custom dependency property, and describes the implementation steps as well as some implementation options that can improve performance, usability, or versatility of the property.</span></span>

<a name="prerequisites"></a>

## <a name="prerequisites"></a><span data-ttu-id="4cf23-104">Voraussetzungen</span><span class="sxs-lookup"><span data-stu-id="4cf23-104">Prerequisites</span></span>

<span data-ttu-id="4cf23-105">In diesem Thema wird vorausgesetzt, dass Sie sich mit Abhängigkeitseigenschaften aus Sicht von vorhandenen Abhängigkeitseigenschaften von Consumern in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-Klassen auskennen, und dass Sie das Thema [Übersicht über Abhängigkeitseigenschaften](dependency-properties-overview.md) gelesen haben.</span><span class="sxs-lookup"><span data-stu-id="4cf23-105">This topic assumes that you understand dependency properties from the perspective of a consumer of existing dependency properties on [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] classes, and have read the [Dependency Properties Overview](dependency-properties-overview.md) topic.</span></span> <span data-ttu-id="4cf23-106">Um den Beispielen in diesem Thema zu folgen, sollten Sie zudem mit [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] vertraut sein und wissen, wie [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-Anwendungen geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="4cf23-106">In order to follow the examples in this topic, you should also understand [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] and know how to write [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] applications.</span></span>

<a name="whatis"></a>

## <a name="what-is-a-dependency-property"></a><span data-ttu-id="4cf23-107">Was ist eine Abhängigkeitseigenschaft?</span><span class="sxs-lookup"><span data-stu-id="4cf23-107">What Is a Dependency Property?</span></span>

<span data-ttu-id="4cf23-108">Sie können eine andernfalls CLR-Eigenschaft (Common Language Runtime) aktivieren, um Styling, Datenbindung, Vererbung, Animationen und Standardwerte zu unterstützen, indem Sie sie als Abhängigkeitseigenschaft implementieren.</span><span class="sxs-lookup"><span data-stu-id="4cf23-108">You can enable what would otherwise be a common language runtime (CLR) property to support styling, data binding, inheritance, animations, and default values by implementing it as a dependency property.</span></span> <span data-ttu-id="4cf23-109">Abhängigkeitseigenschaften sind Eigenschaften, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] die beim Eigenschaftensystem durch Aufrufen der <xref:System.Windows.DependencyProperty.Register%2A> Methode (oder <xref:System.Windows.DependencyProperty.RegisterReadOnly%2A>) registriert werden und die durch ein <xref:System.Windows.DependencyProperty> Bezeichnerfeld unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="4cf23-109">Dependency properties are properties that are registered with the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system by calling the <xref:System.Windows.DependencyProperty.Register%2A> method (or <xref:System.Windows.DependencyProperty.RegisterReadOnly%2A>), and that are backed by a <xref:System.Windows.DependencyProperty> identifier field.</span></span> <span data-ttu-id="4cf23-110">Abhängigkeitseigenschaften können nur <xref:System.Windows.DependencyObject> von <xref:System.Windows.DependencyObject> Typen verwendet werden, sind jedoch in der [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] Klassenhierarchie recht hoch, sodass die meisten in verfügbaren Klassen Abhängigkeitseigenschaften unterstützen können.</span><span class="sxs-lookup"><span data-stu-id="4cf23-110">Dependency properties can be used only by <xref:System.Windows.DependencyObject> types, but <xref:System.Windows.DependencyObject> is quite high in the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] class hierarchy, so the majority of classes available in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] can support dependency properties.</span></span> <span data-ttu-id="4cf23-111">Weitere Informationen zu Abhängigkeitseigenschaften und einigen der Terminologie und Konventionen, die für deren Beschreibung in diesem SDK verwendet werden, finden Sie unter Übersicht über [Abhängigkeitseigenschaften](dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4cf23-111">For more information about dependency properties and some of the terminology and conventions used for describing them in this SDK, see [Dependency Properties Overview](dependency-properties-overview.md).</span></span>

<a name="example_dp"></a>

## <a name="examples-of-dependency-properties"></a><span data-ttu-id="4cf23-112">Beispiele für Abhängigkeitseigenschaften</span><span class="sxs-lookup"><span data-stu-id="4cf23-112">Examples of Dependency Properties</span></span>

<span data-ttu-id="4cf23-113">Beispiele für Abhängigkeitseigenschaften, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] die <xref:System.Windows.Controls.Control.Background%2A> für Klassen <xref:System.Windows.FrameworkElement.Width%2A> implementiert werden, sind unter anderem die Eigenschaft, die Eigenschaft und die <xref:System.Windows.Controls.TextBox.Text%2A> Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="4cf23-113">Examples of dependency properties that are implemented on [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] classes include the <xref:System.Windows.Controls.Control.Background%2A> property, the <xref:System.Windows.FrameworkElement.Width%2A> property, and the <xref:System.Windows.Controls.TextBox.Text%2A> property, among many others.</span></span> <span data-ttu-id="4cf23-114">Jede Abhängigkeitseigenschaft, die von einer Klasse <xref:System.Windows.DependencyProperty> verfügbar gemacht wird, verfügt über ein entsprechendes öffentliches statisches Feld vom Typ, das für dieselbe Klasse verfügbar gemacht wird.</span><span class="sxs-lookup"><span data-stu-id="4cf23-114">Each dependency property exposed by a class has a corresponding public static field of type <xref:System.Windows.DependencyProperty> exposed on that same class.</span></span> <span data-ttu-id="4cf23-115">Es handelt sich um den Bezeichner für die Abhängigkeitseigenschaft.</span><span class="sxs-lookup"><span data-stu-id="4cf23-115">This is the identifier for the dependency property.</span></span> <span data-ttu-id="4cf23-116">Der Name des Bezeichners wird nach einer Konvention gewählt: Der Name der Abhängigkeitseigenschaft mit der angefügten Zeichenfolge `Property`.</span><span class="sxs-lookup"><span data-stu-id="4cf23-116">The identifier is named using a convention: the name of the dependency property with the string `Property` appended to it.</span></span> <span data-ttu-id="4cf23-117">Das entsprechende <xref:System.Windows.DependencyProperty> Bezeichnerfeld <xref:System.Windows.Controls.Control.Background%2A> für <xref:System.Windows.Controls.Control.BackgroundProperty>die Eigenschaft lautet z. B. .</span><span class="sxs-lookup"><span data-stu-id="4cf23-117">For example, the corresponding <xref:System.Windows.DependencyProperty> identifier field for the <xref:System.Windows.Controls.Control.Background%2A> property is <xref:System.Windows.Controls.Control.BackgroundProperty>.</span></span> <span data-ttu-id="4cf23-118">Der Bezeichner speichert die Informationen über die Abhängigkeitseigenschaft, wie sie registriert wurde, und <xref:System.Windows.DependencyObject.SetValue%2A>der Bezeichner wird später für andere Vorgänge verwendet, die die Abhängigkeitseigenschaft betreffen, z. B. aufrufen .</span><span class="sxs-lookup"><span data-stu-id="4cf23-118">The identifier stores the information about the dependency property as it was registered, and the identifier is then used later for other operations involving the dependency property, such as calling <xref:System.Windows.DependencyObject.SetValue%2A>.</span></span>

<span data-ttu-id="4cf23-119">Wie in der Übersicht über [Abhängigkeitseigenschaften](dependency-properties-overview.md)erwähnt, sind alle Abhängigkeitseigenschaften in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] (mit Ausnahme der meisten angefügten Eigenschaften) aufgrund der "wrapper"-Implementierung ebenfalls CLR-Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="4cf23-119">As mentioned in the [Dependency Properties Overview](dependency-properties-overview.md), all dependency properties in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] (except most attached properties) are also CLR properties because of the "wrapper" implementation.</span></span> <span data-ttu-id="4cf23-120">Daher können Sie aus Code Abhängigkeitseigenschaften abrufen oder festlegen, indem Sie CLR-Accessoren aufrufen, die die Wrapper auf die gleiche Weise definieren, wie Sie andere CLR-Eigenschaften verwenden würden.</span><span class="sxs-lookup"><span data-stu-id="4cf23-120">Therefore, from code, you can get or set dependency properties by calling CLR accessors that define the wrappers in the same manner that you would use other CLR properties.</span></span> <span data-ttu-id="4cf23-121">Als Consumer etablierter Abhängigkeitseigenschaften verwenden Sie <xref:System.Windows.DependencyObject> <xref:System.Windows.DependencyObject.GetValue%2A> in <xref:System.Windows.DependencyObject.SetValue%2A>der Regel nicht die Methoden und , die den Verbindungspunkt zum zugrunde liegenden Eigenschaftensystem darstellen.</span><span class="sxs-lookup"><span data-stu-id="4cf23-121">As a consumer of established dependency properties, you do not typically use the <xref:System.Windows.DependencyObject> methods <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A>, which are the connection point to the underlying property system.</span></span> <span data-ttu-id="4cf23-122">Vielmehr wird die vorhandene Implementierung der CLR-Eigenschaften <xref:System.Windows.DependencyObject.GetValue%2A> bereits aufgerufen haben und <xref:System.Windows.DependencyObject.SetValue%2A> innerhalb der `get` und `set` wrapper Implementierungen der Eigenschaft, mit dem Bezeichnerfeld entsprechend.</span><span class="sxs-lookup"><span data-stu-id="4cf23-122">Rather, the existing implementation of the CLR properties will have already called <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> within the `get` and `set` wrapper implementations of the property, using the identifier field appropriately.</span></span> <span data-ttu-id="4cf23-123">Wenn Sie eine benutzerdefinierte Abhängigkeitseigenschaft selbst implementieren, definieren Sie den Wrapper auf ähnliche Weise.</span><span class="sxs-lookup"><span data-stu-id="4cf23-123">If you are implementing a custom dependency property yourself, then you will be defining the wrapper in a similar way.</span></span>

<a name="backing_with_dp"></a>

## <a name="when-should-you-implement-a-dependency-property"></a><span data-ttu-id="4cf23-124">Wann sollten Sie eine Abhängigkeitseigenschaft implementieren?</span><span class="sxs-lookup"><span data-stu-id="4cf23-124">When Should You Implement a Dependency Property?</span></span>

<span data-ttu-id="4cf23-125">Wenn Sie eine Eigenschaft für eine Klasse implementieren, haben <xref:System.Windows.DependencyObject>Sie die Möglichkeit, ihre Eigenschaft <xref:System.Windows.DependencyProperty> mit einem Bezeichner zu unterstützen und sie somit zu einer Abhängigkeitseigenschaft zu machen.</span><span class="sxs-lookup"><span data-stu-id="4cf23-125">When you implement a property on a class, so long as your class derives from <xref:System.Windows.DependencyObject>, you have the option to back your property with a <xref:System.Windows.DependencyProperty> identifier and thus to make it a dependency property.</span></span> <span data-ttu-id="4cf23-126">Es ist nicht immer notwendig oder angemessen, Ihre Eigenschaft in eine Abhängigkeitseigenschaft umzuwandeln. Es hängt von den Anforderungen Ihres Szenarios ab.</span><span class="sxs-lookup"><span data-stu-id="4cf23-126">Having your property be a dependency property is not always necessary or appropriate, and will depend on your scenario needs.</span></span> <span data-ttu-id="4cf23-127">Manchmal ist die normale Technik des Sicherns der Eigenschaft mit einem privaten Feld ausreichend.</span><span class="sxs-lookup"><span data-stu-id="4cf23-127">Sometimes, the typical technique of backing your property with a private field is adequate.</span></span> <span data-ttu-id="4cf23-128">Sie sollten Ihre Eigenschaft allerdings als Abhängigkeitseigenschaft implementieren, wenn Sie möchten, dass Ihre Eigenschaft eine oder mehrere der folgenden [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-Funktionen unterstützt:</span><span class="sxs-lookup"><span data-stu-id="4cf23-128">However, you should implement your property as a dependency property whenever you want your property to support one or more of the following [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] capabilities:</span></span>

- <span data-ttu-id="4cf23-129">Sie möchten, dass Ihre Eigenschaft in einem Stil festgelegt werden kann.</span><span class="sxs-lookup"><span data-stu-id="4cf23-129">You want your property to be settable in a style.</span></span> <span data-ttu-id="4cf23-130">Weitere Informationen finden Sie unter [Erstellen von Formaten und Vorlagen](../../../desktop-wpf/fundamentals/styles-templates-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4cf23-130">For more information, see [Styling and Templating](../../../desktop-wpf/fundamentals/styles-templates-overview.md).</span></span>

- <span data-ttu-id="4cf23-131">Sie möchten, dass die Eigenschaft Datenbindung unterstützt.</span><span class="sxs-lookup"><span data-stu-id="4cf23-131">You want your property to support data binding.</span></span> <span data-ttu-id="4cf23-132">Weitere Informationen zur Datenbindung mit Abhängigkeitseigenschaften finden Sie unter [Binden der Eigenschaften von zwei Steuerelementen](../data/how-to-bind-the-properties-of-two-controls.md).</span><span class="sxs-lookup"><span data-stu-id="4cf23-132">For more information about data binding dependency properties, see [Bind the Properties of Two Controls](../data/how-to-bind-the-properties-of-two-controls.md).</span></span>

- <span data-ttu-id="4cf23-133">Sie möchten, dass die Eigenschaft mit einem dynamischen Ressourcenverweis festgelegt werden kann.</span><span class="sxs-lookup"><span data-stu-id="4cf23-133">You want your property to be settable with a dynamic resource reference.</span></span> <span data-ttu-id="4cf23-134">Weitere Informationen finden Sie unter [XAML-Ressourcen](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span><span class="sxs-lookup"><span data-stu-id="4cf23-134">For more information, see [XAML Resources](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span></span>

- <span data-ttu-id="4cf23-135">Sie möchten einen Eigenschaftswert automatisch von einem übergeordneten Element in der Elementstruktur erben.</span><span class="sxs-lookup"><span data-stu-id="4cf23-135">You want to inherit a property value automatically from a parent element in the element tree.</span></span> <span data-ttu-id="4cf23-136">Registrieren Sie sich in <xref:System.Windows.DependencyProperty.RegisterAttached%2A> diesem Fall bei der Methode, auch wenn Sie auch einen Eigenschaftenwrapper für den CLR-Zugriff erstellen.</span><span class="sxs-lookup"><span data-stu-id="4cf23-136">In this case, register with the <xref:System.Windows.DependencyProperty.RegisterAttached%2A> method, even if you also create a property wrapper for CLR access.</span></span> <span data-ttu-id="4cf23-137">Weitere Informationen finden Sie unter [Vererbung von Eigenschaftswerten](property-value-inheritance.md).</span><span class="sxs-lookup"><span data-stu-id="4cf23-137">For more information, see [Property Value Inheritance](property-value-inheritance.md).</span></span>

- <span data-ttu-id="4cf23-138">Sie möchten, dass Ihre Eigenschaft animiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="4cf23-138">You want your property to be animatable.</span></span> <span data-ttu-id="4cf23-139">Weitere Informationen finden Sie unter [Übersicht über Animation](../graphics-multimedia/animation-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4cf23-139">For more information, see [Animation Overview](../graphics-multimedia/animation-overview.md).</span></span>

- <span data-ttu-id="4cf23-140">Sie möchten, dass das Eigenschaftensystem berichtet, wenn der vorherige Wert der Eigenschaft durch Aktionen des Eigenschaftensystems, der Umgebung, des Benutzers oder durch Lesen und Verwenden von Stilen geändert wurde.</span><span class="sxs-lookup"><span data-stu-id="4cf23-140">You want the property system to report when the previous value of the property has been changed by actions taken by the property system, the environment, or the user, or by reading and using styles.</span></span> <span data-ttu-id="4cf23-141">Mithilfe von Eigenschaftenmetadaten kann Ihre Eigenschaft eine Rückrufmethode angeben, die jedes Mal aufgerufen wird, wenn das Eigenschaftensystem feststellt, dass der Eigenschaftswert eindeutig geändert wurde.</span><span class="sxs-lookup"><span data-stu-id="4cf23-141">By using property metadata, your property can specify a callback method that will be invoked each time the property system determines that your property value was definitively changed.</span></span> <span data-ttu-id="4cf23-142">Ein verwandtes Konzept ist die Koersion des Eigenschaftswerts.</span><span class="sxs-lookup"><span data-stu-id="4cf23-142">A related concept is property value coercion.</span></span> <span data-ttu-id="4cf23-143">Weitere Informationen finden Sie unter [Rückrufe und Validierung von Abhängigkeitseigenschaften](dependency-property-callbacks-and-validation.md).</span><span class="sxs-lookup"><span data-stu-id="4cf23-143">For more information, see [Dependency Property Callbacks and Validation](dependency-property-callbacks-and-validation.md).</span></span>

- <span data-ttu-id="4cf23-144">Sie möchten geltende Konventionen für Metadaten verwenden, die auch von [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-Vorgängen verwendet werden, z.B. der Bericht, ob das Layoutsystem aufgrund eines geänderten Eigenschaftswerts die visuellen Objekte für ein Element neu aufbauen soll.</span><span class="sxs-lookup"><span data-stu-id="4cf23-144">You want to use established metadata conventions that are also used by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] processes, such as reporting whether changing a property value should require the layout system to recompose the visuals for an element.</span></span> <span data-ttu-id="4cf23-145">Oder Sie möchten Überschreibungen von Metadaten verwenden, sodass abgeleitete Klassen auf Metadaten basierende Eigenschaften, z.B. den Standardwert, ändern können.</span><span class="sxs-lookup"><span data-stu-id="4cf23-145">Or you want to be able to use metadata overrides so that derived classes can change metadata-based characteristics such as the default value.</span></span>

- <span data-ttu-id="4cf23-146">Eigenschaften eines benutzerdefinierten Steuerelements sollen Visual Studio WPF **Properties** Designer unterstützungserhalten, z. B. Eigenschaftenfensterbearbeitung.</span><span class="sxs-lookup"><span data-stu-id="4cf23-146">You want properties of a custom control to receive Visual Studio WPF Designer support, such as **Properties** window editing.</span></span> <span data-ttu-id="4cf23-147">Weitere Informationen finden Sie unter [Übersicht über das Erstellen von Steuerelementen](../controls/control-authoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4cf23-147">For more information, see [Control Authoring Overview](../controls/control-authoring-overview.md).</span></span>

<span data-ttu-id="4cf23-148">Wenn Sie diese Szenarios untersuchen, sollten Sie auch bedenken, ob Sie Ihr Szenario erreichen können, indem Sie die Metadaten einer vorhandenen Abhängigkeitseigenschaft überschreiben, anstatt eine völlig neue Eigenschaft zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="4cf23-148">When you examine these scenarios, you should also consider whether you can achieve your scenario by overriding the metadata of an existing dependency property, rather than implementing a completely new property.</span></span> <span data-ttu-id="4cf23-149">Ob die Überschreibung von Metadaten sinnvoll ist hängt von Ihrem Szenario ab und wie sehr dieses Szenario der Implementierung vorhandener [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-Abhängigkeitseigenschaften und -Klassen ähnelt.</span><span class="sxs-lookup"><span data-stu-id="4cf23-149">Whether a metadata override is practical depends on your scenario and how closely that scenario resembles the implementation in existing [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] dependency properties and classes.</span></span> <span data-ttu-id="4cf23-150">Weitere Informationen zum Überschreiben der Metadaten von vorhandenen Eigenschaften finden Sie unter [Metadaten für Abhängigkeitseigenschaften](dependency-property-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="4cf23-150">For more information about overriding metadata on existing properties, see [Dependency Property Metadata](dependency-property-metadata.md).</span></span>

<a name="checklist"></a>

## <a name="checklist-for-defining-a-dependency-property"></a><span data-ttu-id="4cf23-151">Prüfliste für die Definition einer Abhängigkeitseigenschaft</span><span class="sxs-lookup"><span data-stu-id="4cf23-151">Checklist for Defining a Dependency Property</span></span>

<span data-ttu-id="4cf23-152">Das Definieren einer Abhängigkeitseigenschaft besteht aus vier unterschiedlichen Konzepten.</span><span class="sxs-lookup"><span data-stu-id="4cf23-152">Defining a dependency property consists of four distinct concepts.</span></span> <span data-ttu-id="4cf23-153">Diese Konzepte sind nicht unbedingt aufeinanderfolgende Schritte, da einige von ihnen am Ende als einzelne Codezeilen in der Implementierung kombiniert werden:</span><span class="sxs-lookup"><span data-stu-id="4cf23-153">These concepts are not necessarily strict procedural steps, because some of these end up being combined as single lines of code in the implementation:</span></span>

- <span data-ttu-id="4cf23-154">(Optional) Erstellen Sie Eigenschaftsmetadaten für die Abhängigkeitseigenschaft.</span><span class="sxs-lookup"><span data-stu-id="4cf23-154">(Optional) Create property metadata for the dependency property.</span></span>

- <span data-ttu-id="4cf23-155">Registrieren Sie den Eigenschaftennamen im Eigenschaftensystem, indem Sie einen Besitzertyp und den Typ des Eigenschaftswerts angeben.</span><span class="sxs-lookup"><span data-stu-id="4cf23-155">Register the property name with the property system, specifying an owner type and the type of the property value.</span></span> <span data-ttu-id="4cf23-156">Geben Sie, falls verwendet, auch die Metadaten der Eigenschaft an.</span><span class="sxs-lookup"><span data-stu-id="4cf23-156">Also specify the property metadata, if used.</span></span>

- <span data-ttu-id="4cf23-157">Definieren <xref:System.Windows.DependencyProperty> Sie einen `public` `static` `readonly` Bezeichner als Feld für den Besitzertyp.</span><span class="sxs-lookup"><span data-stu-id="4cf23-157">Define a <xref:System.Windows.DependencyProperty> identifier as a `public` `static` `readonly` field on the owner type.</span></span>

- <span data-ttu-id="4cf23-158">Definieren Sie eine CLR-Eigenschaft "wrapper", deren Name mit dem Namen der Abhängigkeitseigenschaft übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="4cf23-158">Define a CLR "wrapper" property whose name matches the name of the dependency property.</span></span> <span data-ttu-id="4cf23-159">Implementieren Sie die CLR-Eigenschaft `get` "wrapper" und `set` Accessoren, um eine Verbindung mit der Abhängigkeitseigenschaft herzustellen, die sie unterstützt.</span><span class="sxs-lookup"><span data-stu-id="4cf23-159">Implement the CLR "wrapper" property's `get` and `set` accessors to connect with the dependency property that backs it.</span></span>

<a name="registering"></a>

### <a name="registering-the-property-with-the-property-system"></a><span data-ttu-id="4cf23-160">Registrieren der Eigenschaft im Eigenschaftensystem</span><span class="sxs-lookup"><span data-stu-id="4cf23-160">Registering the Property with the Property System</span></span>

<span data-ttu-id="4cf23-161">Damit Ihre Eigenschaft zu einer Abhängigkeitseigenschaft wird, müssen Sie diese Eigenschaft in einer Tabelle im Eigenschaftensystem registrieren und einen eindeutigen Bezeichner angeben. Dieser wird als Qualifizierer für spätere Vorgänge im Eigenschaftensystem verwendet.</span><span class="sxs-lookup"><span data-stu-id="4cf23-161">In order for your property to be a dependency property, you must register that property into a table maintained by the property system, and give it a unique identifier that is used as the qualifier for later property system operations.</span></span> <span data-ttu-id="4cf23-162">Bei diesen Vorgängen kann es sich um interne Vorgänge oder eigene Codeaufrufeigenschaftensystem-APIs handelt.</span><span class="sxs-lookup"><span data-stu-id="4cf23-162">These operations might be internal operations, or your own code calling property system APIs.</span></span> <span data-ttu-id="4cf23-163">Um die Eigenschaft zu <xref:System.Windows.DependencyProperty.Register%2A> registrieren, rufen Sie die Methode innerhalb des Körpers Ihrer Klasse auf (innerhalb der Klasse, jedoch außerhalb von Memberdefinitionen).</span><span class="sxs-lookup"><span data-stu-id="4cf23-163">To register the property, you call the <xref:System.Windows.DependencyProperty.Register%2A> method within the body of your class (inside the class, but outside of any member definitions).</span></span> <span data-ttu-id="4cf23-164">Das Bezeichnerfeld wird <xref:System.Windows.DependencyProperty.Register%2A> auch vom Methodenaufruf als Rückgabewert bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="4cf23-164">The identifier field is also provided by the <xref:System.Windows.DependencyProperty.Register%2A> method call, as the return value.</span></span> <span data-ttu-id="4cf23-165">Der Grund <xref:System.Windows.DependencyProperty.Register%2A> dafür, dass der Aufruf außerhalb anderer Memberdefinitionen erfolgt, `public` `static` `readonly` liegt darin, dass Sie diesen Rückgabewert verwenden, um ein Feld vom Typ als Teil Ihrer Klasse zuzuweisen und zu <xref:System.Windows.DependencyProperty> erstellen.</span><span class="sxs-lookup"><span data-stu-id="4cf23-165">The reason that the <xref:System.Windows.DependencyProperty.Register%2A> call is done outside of other member definitions is because you use this return value to assign and create a `public` `static` `readonly` field of type <xref:System.Windows.DependencyProperty> as part of your class.</span></span> <span data-ttu-id="4cf23-166">Das Feld wird zum Bezeichner für Ihre Abhängigkeitseigenschaft.</span><span class="sxs-lookup"><span data-stu-id="4cf23-166">This field becomes the identifier for your dependency property.</span></span>

[!code-csharp[WPFAquariumSln#RegisterAG](~/samples/snippets/csharp/VS_Snippets_Wpf/WPFAquariumSln/CSharp/WPFAquariumObjects/Class1.cs#registerag)]
[!code-vb[WPFAquariumSln#RegisterAG](~/samples/snippets/visualbasic/VS_Snippets_Wpf/WPFAquariumSln/visualbasic/wpfaquariumobjects/class1.vb#registerag)]

<a name="nameconventions"></a>

### <a name="dependency-property-name-conventions"></a><span data-ttu-id="4cf23-167">Namenskonventionen für Abhängigkeitseigenschaften</span><span class="sxs-lookup"><span data-stu-id="4cf23-167">Dependency Property Name Conventions</span></span>

<span data-ttu-id="4cf23-168">Es gibt Namenskonventionen für Abhängigkeitseigenschaften, die Sie bis auf bestimmte Ausnahmefälle befolgen müssen.</span><span class="sxs-lookup"><span data-stu-id="4cf23-168">There are established naming conventions regarding dependency properties that you must follow in all but exceptional circumstances.</span></span>

<span data-ttu-id="4cf23-169">Die Abhängigkeitseigenschaft selbst hat einen grundlegenden Namen, "AquariumGraphic", wie in diesem <xref:System.Windows.DependencyProperty.Register%2A>Beispiel, der als erster Parameter von angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="4cf23-169">The dependency property itself will have a basic name, "AquariumGraphic" as in this example, which is given as the first parameter of <xref:System.Windows.DependencyProperty.Register%2A>.</span></span> <span data-ttu-id="4cf23-170">Dieser Name muss innerhalb jedes Registrierungstyps eindeutig sein.</span><span class="sxs-lookup"><span data-stu-id="4cf23-170">That name must be unique within each registering type.</span></span> <span data-ttu-id="4cf23-171">Abhängigkeitseigenschaften, die über Basistypen geerbt werden, gelten bereits als teil des Registrierungstyps. Namen von geerbten Eigenschaften können nicht erneut registriert werden.</span><span class="sxs-lookup"><span data-stu-id="4cf23-171">Dependency properties inherited through base types are considered to be already part of the registering type; names of inherited properties cannot be registered again.</span></span> <span data-ttu-id="4cf23-172">Es gibt jedoch ein Verfahren zum Hinzufügen von Klassen als Besitzer einer Abhängigkeitseigenschaft, sogar wenn diese Abhängigkeitseigenschaft nicht geerbt ist. Weitere Informationen hierzu finden Sie unter [Metadaten für Abhängigkeitseigenschaften](dependency-property-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="4cf23-172">However, there is a technique for adding a class as owner of a dependency property even when that dependency property is not inherited; for details, see [Dependency Property Metadata](dependency-property-metadata.md).</span></span>

<span data-ttu-id="4cf23-173">Geben Sie einem Bezeichnerfeld beim Erstellen den Namen der Eigenschaft bei der Registrierung und das Suffix `Property`.</span><span class="sxs-lookup"><span data-stu-id="4cf23-173">When you create the identifier field, name this field by the name of the property as you registered it, plus the suffix `Property`.</span></span> <span data-ttu-id="4cf23-174">Dieses Feld ist Ihr Bezeichner für die Abhängigkeitseigenschaft und <xref:System.Windows.DependencyObject.SetValue%2A> <xref:System.Windows.DependencyObject.GetValue%2A> wird später als Eingabe für die und Aufrufe verwendet, die Sie in den Wrappern, durch jeden anderen Codezugriff auf die Eigenschaft durch Ihren eigenen Code, durch jeden externen Codezugriff, den Sie zulassen, durch das Eigenschaftensystem und möglicherweise durch [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] Prozessoren vornehmen.</span><span class="sxs-lookup"><span data-stu-id="4cf23-174">This field is your identifier for the dependency property, and it will be used later as an input for the <xref:System.Windows.DependencyObject.SetValue%2A> and <xref:System.Windows.DependencyObject.GetValue%2A> calls you will make in the wrappers, by any other code access to the property by your own code, by any external code access you allow, by the property system, and potentially by [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processors.</span></span>

> [!NOTE]
> <span data-ttu-id="4cf23-175">Die übliche Implementierung ist das Definieren der Abhängigkeitseigenschaft im Text einer Klasse. Es ist aber auch möglich, eine Abhängigkeitseigenschaft im statischen Konstruktor der Klasse zu definieren.</span><span class="sxs-lookup"><span data-stu-id="4cf23-175">Defining the dependency property in the class body is the typical implementation, but it is also possible to define a dependency property in the class static constructor.</span></span> <span data-ttu-id="4cf23-176">Diese Vorgehensweise kann sinnvoll sein, wenn Sie mehr als eine Codezeile benötigen, um die Abhängigkeitseigenschaft zu initialisieren.</span><span class="sxs-lookup"><span data-stu-id="4cf23-176">This approach might make sense if you need more than one line of code to initialize the dependency property.</span></span>

<a name="wrapper1"></a>

### <a name="implementing-the-wrapper"></a><span data-ttu-id="4cf23-177">Implementieren des „Wrappers“</span><span class="sxs-lookup"><span data-stu-id="4cf23-177">Implementing the "Wrapper"</span></span>

<span data-ttu-id="4cf23-178">Ihre Wrapperimplementierung <xref:System.Windows.DependencyObject.GetValue%2A> sollte `get` in der <xref:System.Windows.DependencyObject.SetValue%2A> Implementierung `set` und in der Implementierung aufrufen (der ursprüngliche Registrierungsaufruf und das Feld werden auch hier zur Übersichtlichkeit angezeigt).</span><span class="sxs-lookup"><span data-stu-id="4cf23-178">Your wrapper implementation should call <xref:System.Windows.DependencyObject.GetValue%2A> in the `get` implementation, and <xref:System.Windows.DependencyObject.SetValue%2A> in the `set` implementation (the original registration call and field are shown here too for clarity).</span></span>

<span data-ttu-id="4cf23-179">In allen außer außergewöhnlichen Umständen sollten Ihre <xref:System.Windows.DependencyObject.GetValue%2A> Wrapperimplementierungen nur die und <xref:System.Windows.DependencyObject.SetValue%2A> Aktionen ausführen.</span><span class="sxs-lookup"><span data-stu-id="4cf23-179">In all but exceptional circumstances, your wrapper implementations should perform only the <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> actions, respectively.</span></span> <span data-ttu-id="4cf23-180">Der Grund hierfür wird im Thema [Laden von XAML und Abhängigkeitseigenschaften](xaml-loading-and-dependency-properties.md) erläutert.</span><span class="sxs-lookup"><span data-stu-id="4cf23-180">The reason for this is discussed in the topic [XAML Loading and Dependency Properties](xaml-loading-and-dependency-properties.md).</span></span>

<span data-ttu-id="4cf23-181">Alle vorhandenen öffentlichen Abhängigkeitseigenschaften, die für die [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-Klassen zur Verfügung stehen, verwenden dieses einfache Modell der Wrapper-Implementierung. Ein Großteil der komplexen Funktionsweise von Abhängigkeitseigenschaften ist entweder ein grundsätzliches Verhalten des Eigenschaftensystems oder wird durch andere Konzepte wie Koersion oder Rückrufe für Eigenschaftenänderungen durch Eigenschaftenmetadaten implementiert.</span><span class="sxs-lookup"><span data-stu-id="4cf23-181">All existing public dependency properties that are provided on the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] classes use this simple wrapper implementation model; most of the complexity of how dependency properties work is either inherently a behavior of the property system, or is implemented through other concepts such as coercion or property change callbacks through property metadata.</span></span>

[!code-csharp[WPFAquariumSln#AGWithWrapper](~/samples/snippets/csharp/VS_Snippets_Wpf/WPFAquariumSln/CSharp/WPFAquariumObjects/Class1.cs#agwithwrapper)]
[!code-vb[WPFAquariumSln#AGWithWrapper](~/samples/snippets/visualbasic/VS_Snippets_Wpf/WPFAquariumSln/visualbasic/wpfaquariumobjects/class1.vb#agwithwrapper)]

<span data-ttu-id="4cf23-182">Auch hier muss der Name der Wrappereigenschaft konventionell mit dem gewählten Namen identisch <xref:System.Windows.DependencyProperty.Register%2A> sein und als erster Parameter des Aufrufs angegeben werden, der die Eigenschaft registriert hat.</span><span class="sxs-lookup"><span data-stu-id="4cf23-182">Again, by convention, the name of the wrapper property must be the same as the name chosen and given as first parameter of the <xref:System.Windows.DependencyProperty.Register%2A> call that registered the property.</span></span> <span data-ttu-id="4cf23-183">Wenn die Eigenschaft den Konventionen nicht folgt, werden dadurch nicht unbedingt alle möglichen Verwendungsarten deaktiviert, aber Sie werden mehrere deutliche Probleme bemerken:</span><span class="sxs-lookup"><span data-stu-id="4cf23-183">If your property does not follow the convention, this does not necessarily disable all possible uses, but you will encounter several notable issues:</span></span>

- <span data-ttu-id="4cf23-184">Bestimmte Aspekte von Stilen und Vorlagen funktionieren nicht.</span><span class="sxs-lookup"><span data-stu-id="4cf23-184">Certain aspects of styles and templates will not work.</span></span>

- <span data-ttu-id="4cf23-185">Die meisten Tools und Designer verlassen sich auf Benennungskonventionen, um [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ordnungsgemäß zu serialisieren oder um Unterstützung für eine Entwicklerumgebung auf Ebene einzelner Eigenschaften zu bieten.</span><span class="sxs-lookup"><span data-stu-id="4cf23-185">Most tools and designers must rely on the naming conventions to properly serialize [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], or to provide designer environment assistance at a per-property level.</span></span>

- <span data-ttu-id="4cf23-186">Die aktuelle Implementierung [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] des Ladevorgangs umgeht die Wrapper vollständig und basiert bei der Verarbeitung von Attributwerten auf der Namenskonvention.</span><span class="sxs-lookup"><span data-stu-id="4cf23-186">The current implementation of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] loader bypasses the wrappers entirely, and relies on the naming convention when processing attribute values.</span></span> <span data-ttu-id="4cf23-187">Weitere Informationen finden Sie unter [Laden von XAML und Abhängigkeitseigenschaften](xaml-loading-and-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="4cf23-187">For more information, see [XAML Loading and Dependency Properties](xaml-loading-and-dependency-properties.md).</span></span>

<a name="metadata"></a>

### <a name="property-metadata-for-a-new-dependency-property"></a><span data-ttu-id="4cf23-188">Eigenschaftsmetadaten für eine neue Abhängigkeitseigenschaft</span><span class="sxs-lookup"><span data-stu-id="4cf23-188">Property Metadata for a New Dependency Property</span></span>

<span data-ttu-id="4cf23-189">Wenn Sie eine Abhängigkeitseigenschaft registrieren, wird bei der Registrierung über das Eigenschaftensystem ein Metadatenobjekt erstellt, das Merkmale der Eigenschaft speichert.</span><span class="sxs-lookup"><span data-stu-id="4cf23-189">When you register a dependency property, the registration through the property system creates a metadata object that stores property characteristics.</span></span> <span data-ttu-id="4cf23-190">Viele dieser Merkmale weisen Standardwerte auf, die festgelegt sind, <xref:System.Windows.DependencyProperty.Register%2A>wenn die Eigenschaft mit den einfachen Signaturen von registriert ist.</span><span class="sxs-lookup"><span data-stu-id="4cf23-190">Many of these characteristics have defaults that are set if the property is registered with the simple signatures of <xref:System.Windows.DependencyProperty.Register%2A>.</span></span> <span data-ttu-id="4cf23-191">Mit <xref:System.Windows.DependencyProperty.Register%2A> anderen Signaturen können Sie die Metadaten angeben, die Sie beim Registrieren der Eigenschaft verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="4cf23-191">Other signatures of <xref:System.Windows.DependencyProperty.Register%2A> allow you to specify the metadata that you want as you register the property.</span></span> <span data-ttu-id="4cf23-192">Die häufigste Art von Metadaten für Abhängigkeitseigenschaften ist ein Standardwert, der für jede neue Instanz angegeben wird, die diese Eigenschaft verwendet.</span><span class="sxs-lookup"><span data-stu-id="4cf23-192">The most common metadata given for dependency properties is to give them a default value that is applied on new instances that use the property.</span></span>

<span data-ttu-id="4cf23-193">Wenn Sie eine Abhängigkeitseigenschaft erstellen, die <xref:System.Windows.FrameworkElement>für eine abgeleitete Klasse <xref:System.Windows.FrameworkPropertyMetadata> von vorhanden <xref:System.Windows.PropertyMetadata> ist, können Sie die spezialisiertere Metadatenklasse anstelle der Basisklasse verwenden.</span><span class="sxs-lookup"><span data-stu-id="4cf23-193">If you are creating a dependency property that exists on a derived class of <xref:System.Windows.FrameworkElement>, you can use the more specialized metadata class <xref:System.Windows.FrameworkPropertyMetadata> rather than the base <xref:System.Windows.PropertyMetadata> class.</span></span> <span data-ttu-id="4cf23-194">Der Konstruktor <xref:System.Windows.FrameworkPropertyMetadata> für die Klasse verfügt über mehrere Signaturen, in denen Sie verschiedene Metadatenmerkmale in Kombination angeben können.</span><span class="sxs-lookup"><span data-stu-id="4cf23-194">The constructor for the <xref:System.Windows.FrameworkPropertyMetadata> class has several signatures where you can specify various metadata characteristics in combination.</span></span> <span data-ttu-id="4cf23-195">Wenn Sie nur den Standardwert angeben möchten, verwenden Sie <xref:System.Object>die Signatur, die einen einzelnen Parameter vom Typ annimmt.</span><span class="sxs-lookup"><span data-stu-id="4cf23-195">If you want to specify the default value only, use the signature that takes a single parameter of type <xref:System.Object>.</span></span> <span data-ttu-id="4cf23-196">Übergeben Sie diesen Objektparameter als typspezifischen Standardwert für Ihre Eigenschaft (der angegebene `propertyType` Standardwert <xref:System.Windows.DependencyProperty.Register%2A> muss der Typ sein, den Sie als Parameter im Aufruf angegeben haben).</span><span class="sxs-lookup"><span data-stu-id="4cf23-196">Pass that object parameter as a type-specific default value for your property (the default value provided must be the type you provided as the `propertyType` parameter in the <xref:System.Windows.DependencyProperty.Register%2A> call).</span></span>

<span data-ttu-id="4cf23-197">Für <xref:System.Windows.FrameworkPropertyMetadata>können Sie auch Metadatenoptionsflags für Ihre Eigenschaft angeben.</span><span class="sxs-lookup"><span data-stu-id="4cf23-197">For <xref:System.Windows.FrameworkPropertyMetadata>, you can also specify metadata option flags for your property.</span></span> <span data-ttu-id="4cf23-198">Diese Flags werden nach der Registrierung in diskrete Eigenschaften auf den Eigenschaftenmetadaten konvertiert und werden verwendet, um bestimmte Bedingungen an andere Prozesse zu kommunizieren, z.B. an die Layout-Engine.</span><span class="sxs-lookup"><span data-stu-id="4cf23-198">These flags are converted into discrete properties on the property metadata after registration and are used to communicate certain conditionals to other processes such as the layout engine.</span></span>

#### <a name="setting-appropriate-metadata-flags"></a><span data-ttu-id="4cf23-199">Festlegen von Flags für die entsprechenden Metadaten</span><span class="sxs-lookup"><span data-stu-id="4cf23-199">Setting Appropriate Metadata Flags</span></span>

- <span data-ttu-id="4cf23-200">Wenn sich Ihre Eigenschaft (oder Änderungen [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)]ihres Wertes) auf die auswirkt und insbesondere die Größe des Layoutsystems anoder <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsMeasure> <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsArrange>das <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsRender>Element auf einer Seite rendert, legen Sie eines oder mehrere der folgenden Flags fest: , , .</span><span class="sxs-lookup"><span data-stu-id="4cf23-200">If your property (or changes in its value) affects the [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)], and in particular affects how the layout system should size or render your element in a page, set one or more of the following flags: <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsMeasure>, <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsArrange>, <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsRender>.</span></span>

  - <span data-ttu-id="4cf23-201"><xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsMeasure>gibt an, dass eine Änderung [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] an dieser Eigenschaft eine Änderung des Renderns erfordert, bei der das enthaltende Objekt möglicherweise mehr oder weniger Speicherplatz innerhalb des übergeordneten Objekts benötigt.</span><span class="sxs-lookup"><span data-stu-id="4cf23-201"><xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsMeasure> indicates that a change to this property requires a change to [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] rendering where the containing object might require more or less space within the parent.</span></span> <span data-ttu-id="4cf23-202">Für die Eigenschaft „Breite“ sollte beispielsweise dieses Flag festgelegt sein.</span><span class="sxs-lookup"><span data-stu-id="4cf23-202">For example, a "Width" property should have this flag set.</span></span>

  - <span data-ttu-id="4cf23-203"><xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsArrange>gibt an, dass eine Änderung [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] an dieser Eigenschaft eine Änderung des Renderings erfordert, die normalerweise keine Änderung des dedizierten Bereichs erfordert, aber darauf hinweist, dass sich die Positionierung innerhalb des Raums geändert hat.</span><span class="sxs-lookup"><span data-stu-id="4cf23-203"><xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsArrange> indicates that a change to this property requires a change to [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] rendering that typically does not require a change in the dedicated space, but does indicate that the positioning within the space has changed.</span></span> <span data-ttu-id="4cf23-204">Für die Eigenschaft „Ausrichtung“ sollte beispielsweise dieses Flag festgelegt sein.</span><span class="sxs-lookup"><span data-stu-id="4cf23-204">For example, an "Alignment" property should have this flag set.</span></span>

  - <span data-ttu-id="4cf23-205"><xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsRender>gibt an, dass eine andere Änderung aufgetreten ist, die sich nicht auf Layout und Kennzahl auswirkt, aber ein anderes Rendering erfordert.</span><span class="sxs-lookup"><span data-stu-id="4cf23-205"><xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsRender> indicates that some other change has occurred that will not affect layout and measure, but does require another render.</span></span> <span data-ttu-id="4cf23-206">Ein Beispiel wäre eine Eigenschaft, die eine Farbe eines vorhandenen Elements ändert, z.B. „Hintergrund“.</span><span class="sxs-lookup"><span data-stu-id="4cf23-206">An example would be a property that changes a color of an existing element, such as "Background".</span></span>

  - <span data-ttu-id="4cf23-207">Diese Flags werden in Metadaten häufig als ein Protokoll für Ihre eigenen Überschreibungsimplementierungen von Eigenschaftensystem oder Layoutrückrufen verwendet.</span><span class="sxs-lookup"><span data-stu-id="4cf23-207">These flags are often used as a protocol in metadata for your own override implementations of property system or layout callbacks.</span></span> <span data-ttu-id="4cf23-208">Sie verfügen beispielsweise über <xref:System.Windows.DependencyObject.OnPropertyChanged%2A> einen Rückruf, <xref:System.Windows.UIElement.InvalidateArrange%2A> der aufruft, wenn eine Eigenschaft <xref:System.Windows.FrameworkPropertyMetadata.AffectsArrange%2A> `true` der Instanz eine Wertänderung meldet und wie in ihren Metadaten vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="4cf23-208">For instance, you might have an <xref:System.Windows.DependencyObject.OnPropertyChanged%2A> callback that will call <xref:System.Windows.UIElement.InvalidateArrange%2A> if any property of the instance reports a value change and has <xref:System.Windows.FrameworkPropertyMetadata.AffectsArrange%2A> as `true` in its metadata.</span></span>

- <span data-ttu-id="4cf23-209">Manche Eigenschaften können Auswirkungen auf die Merkmale des Renderings des übergeordneten Elements haben, sowohl über und unter den Änderungen der oben genannten benötigten Größe.</span><span class="sxs-lookup"><span data-stu-id="4cf23-209">Some properties may affect the rendering characteristics of the containing parent element, in ways above and beyond the changes in required size mentioned above.</span></span> <span data-ttu-id="4cf23-210">Ein Beispiel <xref:System.Windows.Documents.Paragraph.MinOrphanLines%2A> ist die Eigenschaft, die im Flow-Dokumentmodell verwendet wird, wobei Änderungen an dieser Eigenschaft die gesamter Rendering des Flussdokuments ändern können, das den Absatz enthält.</span><span class="sxs-lookup"><span data-stu-id="4cf23-210">An example is the <xref:System.Windows.Documents.Paragraph.MinOrphanLines%2A> property used in the flow document model, where changes to that property can change the overall rendering of the flow document that contains the paragraph.</span></span> <span data-ttu-id="4cf23-211">Verwenden <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsParentArrange> <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsParentMeasure> oder identifizieren Sie ähnliche Fälle in Ihren eigenen Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="4cf23-211">Use <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsParentArrange> or <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsParentMeasure> to identify similar cases in your own properties.</span></span>

- <span data-ttu-id="4cf23-212">Standardmäßig unterstützen Abhängigkeitseigenschaften die Datenbindung.</span><span class="sxs-lookup"><span data-stu-id="4cf23-212">By default, dependency properties support data binding.</span></span> <span data-ttu-id="4cf23-213">Sie können die Datenbindung in Fällen bewusst deaktivieren, in denen kein realistisches Szenario für die Datenbindung besteht, oder in denen die Leistung der Datenbindung für ein großes Objekt als Problem erkannt wird.</span><span class="sxs-lookup"><span data-stu-id="4cf23-213">You can deliberately disable data binding, for cases where there is no realistic scenario for data binding, or where performance in data binding for a large object is recognized as a problem.</span></span>

- <span data-ttu-id="4cf23-214">Standardmäßig ist die <xref:System.Windows.Data.Binding.Mode%2A> Datenbindung für <xref:System.Windows.Data.BindingMode.OneWay>Abhängigkeitseigenschaften standardmäßig auf .</span><span class="sxs-lookup"><span data-stu-id="4cf23-214">By default, data binding <xref:System.Windows.Data.Binding.Mode%2A> for dependency properties defaults to <xref:System.Windows.Data.BindingMode.OneWay>.</span></span> <span data-ttu-id="4cf23-215">Sie können die Bindung <xref:System.Windows.Data.BindingMode.TwoWay> jederzeit so ändern, dass sie pro Bindungsinstanz angezeigt wird. Weitere Informationen finden Sie unter [Angeben der Richtung der Bindung](../data/how-to-specify-the-direction-of-the-binding.md).</span><span class="sxs-lookup"><span data-stu-id="4cf23-215">You can always change the binding to be <xref:System.Windows.Data.BindingMode.TwoWay> per binding instance; for details, see [Specify the Direction of the Binding](../data/how-to-specify-the-direction-of-the-binding.md).</span></span> <span data-ttu-id="4cf23-216">Als Autor der Abhängigkeitseigenschaft können Sie jedoch <xref:System.Windows.Data.BindingMode.TwoWay> festlegen, dass die Eigenschaft standardmäßig den Bindungsmodus verwendet.</span><span class="sxs-lookup"><span data-stu-id="4cf23-216">But as the dependency property author, you can choose to make the property use <xref:System.Windows.Data.BindingMode.TwoWay> binding mode by default.</span></span> <span data-ttu-id="4cf23-217">Ein Beispiel für eine <xref:System.Windows.Controls.MenuItem.IsSubmenuOpen%2A?displayProperty=nameWithType>vorhandene Abhängigkeitseigenschaft ist ; Das Szenario für diese <xref:System.Windows.Controls.MenuItem.IsSubmenuOpen%2A> Eigenschaft besteht darin, dass <xref:System.Windows.Controls.MenuItem> die Einstellungslogik und das Kompotieren von interagieren mit dem Standarddesignstil.</span><span class="sxs-lookup"><span data-stu-id="4cf23-217">An example of an existing dependency property is <xref:System.Windows.Controls.MenuItem.IsSubmenuOpen%2A?displayProperty=nameWithType>; the scenario for this property is that the <xref:System.Windows.Controls.MenuItem.IsSubmenuOpen%2A> setting logic and the compositing of <xref:System.Windows.Controls.MenuItem> interact with the default theme style.</span></span> <span data-ttu-id="4cf23-218">Die <xref:System.Windows.Controls.MenuItem.IsSubmenuOpen%2A> Eigenschaftenlogik verwendet die Datenbindung nativ, um den Status der Eigenschaft in Übereinstimmung mit anderen Statuseigenschaften und Methodenaufrufen beizubehalten.</span><span class="sxs-lookup"><span data-stu-id="4cf23-218">The <xref:System.Windows.Controls.MenuItem.IsSubmenuOpen%2A> property logic uses data binding natively to maintain the state of the property in accordance to other state properties and method calls.</span></span> <span data-ttu-id="4cf23-219">Eine weitere Beispieleigenschaft, die standardmäßig gebunden <xref:System.Windows.Data.BindingMode.TwoWay> wird, ist <xref:System.Windows.Controls.TextBox.Text%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="4cf23-219">Another example property that binds <xref:System.Windows.Data.BindingMode.TwoWay> by default is <xref:System.Windows.Controls.TextBox.Text%2A?displayProperty=nameWithType>.</span></span>

- <span data-ttu-id="4cf23-220">Sie können die Eigenschaftenvererbung in einer <xref:System.Windows.FrameworkPropertyMetadataOptions.Inherits> benutzerdefinierten Abhängigkeitseigenschaft auch aktivieren, indem Sie das Flag festlegen.</span><span class="sxs-lookup"><span data-stu-id="4cf23-220">You can also enable property inheritance in a custom dependency property by setting the <xref:System.Windows.FrameworkPropertyMetadataOptions.Inherits> flag.</span></span> <span data-ttu-id="4cf23-221">Eigenschaftenvererbung eignet sich für ein Szenario, in dem übergeordnete und untergeordnete Elemente über eine gemeinsame Eigenschaft verfügen und es sinnvoll ist, dass das untergeordnete Element diesen bestimmten Eigenschaftswert auf den gleichen Wert wie das übergeordnete Element festlegt.</span><span class="sxs-lookup"><span data-stu-id="4cf23-221">Property inheritance is useful for a scenario where parent elements and child elements have a property in common, and it makes sense for the child elements to have that particular property value set to the same value as the parent set it.</span></span> <span data-ttu-id="4cf23-222">Eine vererbbare Beispieleigenschaft ist <xref:System.Windows.FrameworkElement.DataContext%2A>, die für Bindungsvorgänge verwendet wird, um das wichtige Masterdetailszenario für die Datenpräsentation zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="4cf23-222">An example inheritable property is <xref:System.Windows.FrameworkElement.DataContext%2A>, which is used for binding operations to enable the important master-detail scenario for data presentation.</span></span> <span data-ttu-id="4cf23-223">Indem <xref:System.Windows.FrameworkElement.DataContext%2A> alle untergeordneten Elemente vererbbar werden, erben sie auch diesen Datenkontext.</span><span class="sxs-lookup"><span data-stu-id="4cf23-223">By making <xref:System.Windows.FrameworkElement.DataContext%2A> inheritable, any child elements inherit that data context also.</span></span> <span data-ttu-id="4cf23-224">Aufgrund der Vererbung von Eigenschaftswerten können Sie einen Datenkontext am Seiten- oder Anwendungsstamm angeben, und müssen ihn nicht für Bindungen in allen möglichen untergeordneten Elementen neu angeben.</span><span class="sxs-lookup"><span data-stu-id="4cf23-224">Because of property value inheritance, you can specify a data context at the page or application root, and do not need to respecify it for bindings in all possible child elements.</span></span> <span data-ttu-id="4cf23-225"><xref:System.Windows.FrameworkElement.DataContext%2A>ist auch ein gutes Beispiel, um zu veranschaulichen, dass die Vererbung den Standardwert überschreibt, aber er kann immer lokal für ein bestimmtes untergeordnetes Element festgelegt werden. Weitere Informationen finden Sie unter [Verwenden des Master-Detail-Musters mit hierarchischen Daten](../data/how-to-use-the-master-detail-pattern-with-hierarchical-data.md).</span><span class="sxs-lookup"><span data-stu-id="4cf23-225"><xref:System.Windows.FrameworkElement.DataContext%2A> is also a good example to illustrate that inheritance overrides the default value, but it can always be set locally on any particular child element; for details, see [Use the Master-Detail Pattern with Hierarchical Data](../data/how-to-use-the-master-detail-pattern-with-hierarchical-data.md).</span></span> <span data-ttu-id="4cf23-226">Die Vererbung von Eigenschaftswerten kann zu Leistungseinbußen führen und sollte deswegen nur sparsam eingesetzt werden. Weitere Informationen hierzu finden Sie unter [Vererbung von Eigenschaftswerten](property-value-inheritance.md).</span><span class="sxs-lookup"><span data-stu-id="4cf23-226">Property value inheritance does have a possible performance cost, and thus should be used sparingly; for details, see [Property Value Inheritance](property-value-inheritance.md).</span></span>

- <span data-ttu-id="4cf23-227">Legen <xref:System.Windows.FrameworkPropertyMetadataOptions.Journal> Sie das Flag fest, um anzugeben, ob Ihre Abhängigkeitseigenschaft von Navigationsjournaldiensten erkannt oder verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="4cf23-227">Set the <xref:System.Windows.FrameworkPropertyMetadataOptions.Journal> flag to indicate if your dependency property should be detected or used by navigation journaling services.</span></span> <span data-ttu-id="4cf23-228">Ein Beispiel <xref:System.Windows.Controls.Primitives.Selector.SelectedIndex%2A> ist die Eigenschaft; Jedes Element, das in einem Auswahlsteuerelement ausgewählt wurde, sollte beibehalten werden, wenn der Journalverlauf navigiert wird.</span><span class="sxs-lookup"><span data-stu-id="4cf23-228">An example is the <xref:System.Windows.Controls.Primitives.Selector.SelectedIndex%2A> property; any item selected in a selection control should be persisted when the journaling history is navigated.</span></span>

<a name="RODP"></a>

## <a name="read-only-dependency-properties"></a><span data-ttu-id="4cf23-229">Schreibgeschützte Abhängigkeitseigenschaften</span><span class="sxs-lookup"><span data-stu-id="4cf23-229">Read-Only Dependency Properties</span></span>

<span data-ttu-id="4cf23-230">Sie können eine Abhängigkeitseigenschaft definieren, die schreibgeschützt ist.</span><span class="sxs-lookup"><span data-stu-id="4cf23-230">You can define a dependency property that is read-only.</span></span> <span data-ttu-id="4cf23-231">Allerdings unterscheiden sich die Szenarios, warum Sie eine Eigenschaft als schreibgeschützt definieren sollen. Dies ist auch beim Registrieren mit dem Eigenschaftensystem und Verfügbar machen des Bezeichners der Fall.</span><span class="sxs-lookup"><span data-stu-id="4cf23-231">However, the scenarios for why you might define your property as read-only are somewhat different, as is the procedure for registering them with the property system and exposing the identifier.</span></span> <span data-ttu-id="4cf23-232">Weitere Informationen finden Sie unter [Schreibgeschützte Abhängigkeitseigenschaften](read-only-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="4cf23-232">For more information, see [Read-Only Dependency Properties](read-only-dependency-properties.md).</span></span>

<a name="CTDP"></a>

## <a name="collection-type-dependency-properties"></a><span data-ttu-id="4cf23-233">Abhängigkeitseigenschaften vom Auflistungstyp</span><span class="sxs-lookup"><span data-stu-id="4cf23-233">Collection-Type Dependency Properties</span></span>

<span data-ttu-id="4cf23-234">Bei Abhängigkeitseigenschaften vom Auflistungstyp gibt es zusätzliche Implementierungsprobleme, die man berücksichtigen sollte.</span><span class="sxs-lookup"><span data-stu-id="4cf23-234">Collection-type dependency properties have some additional implementation issues to consider.</span></span> <span data-ttu-id="4cf23-235">Weitere Informationen finden Sie unter [Abhängigkeitseigenschaften vom Auflistungstyp](collection-type-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="4cf23-235">For details, see [Collection-Type Dependency Properties](collection-type-dependency-properties.md).</span></span>

<a name="SecurityC"></a>

## <a name="dependency-property-security-considerations"></a><span data-ttu-id="4cf23-236">Überlegungen zur Sicherheit von Abhängigkeitseigenschaften</span><span class="sxs-lookup"><span data-stu-id="4cf23-236">Dependency Property Security Considerations</span></span>

<span data-ttu-id="4cf23-237">Abhängigkeitseigenschaften sollten als öffentliche Eigenschaften deklariert werden.</span><span class="sxs-lookup"><span data-stu-id="4cf23-237">Dependency properties should be declared as public properties.</span></span> <span data-ttu-id="4cf23-238">Bezeichnerfelder für Abhängigkeitseigenschaften sollten als öffentliche statische Felder deklariert werden.</span><span class="sxs-lookup"><span data-stu-id="4cf23-238">Dependency property identifier fields should be declared as public static fields.</span></span> <span data-ttu-id="4cf23-239">Auch wenn Sie versuchen, andere Zugriffsebenen (z. B. geschützt) zu deklarieren, kann immer über den Bezeichner in Kombination mit den Eigenschaftensystem-APIs auf eine Abhängigkeitseigenschaft zugegriffen werden.</span><span class="sxs-lookup"><span data-stu-id="4cf23-239">Even if you attempt to declare other access levels (such as protected), a dependency property can always be accessed through the identifier in combination with the property system APIs.</span></span> <span data-ttu-id="4cf23-240">Sogar ein geschütztes Bezeichnerfeld ist aufgrund von Metadatenberichten oder Wertermittlungs-APIs, die Teil des Eigenschaftensystems sind, wie <xref:System.Windows.LocalValueEnumerator>z. B. zugänglich.</span><span class="sxs-lookup"><span data-stu-id="4cf23-240">Even a protected identifier field is potentially accessible because of metadata reporting or value determination APIs that are part of the property system, such as <xref:System.Windows.LocalValueEnumerator>.</span></span> <span data-ttu-id="4cf23-241">Weitere Informationen finden Sie unter [Sicherheit von Abhängigkeitseigenschaften](dependency-property-security.md).</span><span class="sxs-lookup"><span data-stu-id="4cf23-241">For more information, see [Dependency Property Security](dependency-property-security.md).</span></span>

<a name="DPCtor"></a>

## <a name="dependency-properties-and-class-constructors"></a><span data-ttu-id="4cf23-242">Abhängigkeitseigenschaften und Klassenkonstruktoren</span><span class="sxs-lookup"><span data-stu-id="4cf23-242">Dependency Properties and Class Constructors</span></span>

<span data-ttu-id="4cf23-243">Es ist ein allgemeines Prinzip für das Programmieren von verwaltetem Code (oft durch Codeanalysetools wie FxCop erzwungen), dass Klassenkonstruktoren keine virtuellen Methoden aufrufen dürfen.</span><span class="sxs-lookup"><span data-stu-id="4cf23-243">There is a general principle in managed code programming (often enforced by code analysis tools such as FxCop) that class constructors should not call virtual methods.</span></span> <span data-ttu-id="4cf23-244">Der Grund hierfür ist, dass Konstruktoren als Basisinitialisierung eines abgeleiteten Klassenkonstruktors aufgerufen werden können. Außerdem erfolgt der Eintritt in die virtuelle Methode über den Konstruktor möglicherweise bei einem unvollständigen Initialisierungszustand der erstellten Objektinstanz.</span><span class="sxs-lookup"><span data-stu-id="4cf23-244">This is because constructors can be called as base initialization of a derived class constructor, and entering the virtual method through the constructor might occur at an incomplete initialization state of the object instance being constructed.</span></span> <span data-ttu-id="4cf23-245">Wenn Sie von einer Klasse ableiten, <xref:System.Windows.DependencyObject>die bereits von ableitet, sollten Sie sich bewusst sein, dass das Eigenschaftensystem selbst virtuelle Methoden intern aufruft und verfügbar macht.</span><span class="sxs-lookup"><span data-stu-id="4cf23-245">When you derive from any class that already derives from <xref:System.Windows.DependencyObject>, you should be aware that the property system itself calls and exposes virtual methods internally.</span></span> <span data-ttu-id="4cf23-246">Diese virtuellen Methoden sind Teil der [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-Dienste für das Eigenschaftensystem.</span><span class="sxs-lookup"><span data-stu-id="4cf23-246">These virtual methods are part of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system services.</span></span> <span data-ttu-id="4cf23-247">Das Überschreiben der Methoden ermöglicht abgeleiteten Klassen,beim Festlegen von Werten teilzunehmen.</span><span class="sxs-lookup"><span data-stu-id="4cf23-247">Overriding the methods enables derived classes to participate in value determination.</span></span> <span data-ttu-id="4cf23-248">Sie sollten die Werte der Abhängigkeitseigenschaft innerhalb von Klassenkonstruktoren nicht festlegen, solange Sie keinem sehr spezifischen Konstruktormuster folgen, um potentielle Probleme bei der Initialisierung der Runtime zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="4cf23-248">To avoid potential issues with runtime initialization, you should not set dependency property values within constructors of classes, unless you follow a very specific constructor pattern.</span></span> <span data-ttu-id="4cf23-249">Weitere Informationen finden Sie unter [Sichere Konstruktormuster für DependencyObjects](safe-constructor-patterns-for-dependencyobjects.md).</span><span class="sxs-lookup"><span data-stu-id="4cf23-249">For details, see [Safe Constructor Patterns for DependencyObjects](safe-constructor-patterns-for-dependencyobjects.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="4cf23-250">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="4cf23-250">See also</span></span>

- [<span data-ttu-id="4cf23-251">Übersicht über Abhängigkeitseigenschaften</span><span class="sxs-lookup"><span data-stu-id="4cf23-251">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="4cf23-252">Metadaten für Abhängigkeitseigenschaften</span><span class="sxs-lookup"><span data-stu-id="4cf23-252">Dependency Property Metadata</span></span>](dependency-property-metadata.md)
- [<span data-ttu-id="4cf23-253">Übersicht über das Erstellen von Steuerelementen</span><span class="sxs-lookup"><span data-stu-id="4cf23-253">Control Authoring Overview</span></span>](../controls/control-authoring-overview.md)
- [<span data-ttu-id="4cf23-254">Abhängigkeitseigenschaften vom Auflistungstyp</span><span class="sxs-lookup"><span data-stu-id="4cf23-254">Collection-Type Dependency Properties</span></span>](collection-type-dependency-properties.md)
- [<span data-ttu-id="4cf23-255">Sicherheit von Abhängigkeitseigenschaften</span><span class="sxs-lookup"><span data-stu-id="4cf23-255">Dependency Property Security</span></span>](dependency-property-security.md)
- [<span data-ttu-id="4cf23-256">Laden von XAML und Abhängigkeitseigenschaften</span><span class="sxs-lookup"><span data-stu-id="4cf23-256">XAML Loading and Dependency Properties</span></span>](xaml-loading-and-dependency-properties.md)
- [<span data-ttu-id="4cf23-257">Sichere Konstruktormuster für DependencyObjects</span><span class="sxs-lookup"><span data-stu-id="4cf23-257">Safe Constructor Patterns for DependencyObjects</span></span>](safe-constructor-patterns-for-dependencyobjects.md)
